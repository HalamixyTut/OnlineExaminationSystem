{"remainingRequest":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\termination project\\front\\src\\function-namespace\\auth\\RegisterFunc.js","dependencies":[{"path":"D:\\termination project\\front\\src\\function-namespace\\auth\\RegisterFunc.js","mtime":1680487519516},{"path":"D:\\termination project\\front\\babel.config.js","mtime":1680487519462},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBhdXRoIGZyb20gJ0AvYXBpL2F1dGgnOwppbXBvcnQgdXRpbHMgZnJvbSAnQC91dGlscy91dGlscyc7CgovLyDms6jlhozooajljZXmlbDmja7kv6Hmga8KY29uc3QgcmVnaXN0ZXJGb3JtID0gewogIHVzZXJuYW1lOiAnJywKICB0cnVlTmFtZTogJycsCiAgcGFzc3dvcmQ6ICcnLAogIGNvZGU6ICcnCn07Ci8vIOiHquWumuS5iemqjOivgeeggeagoemqjOinhOWImQpjb25zdCB2YWxpZGF0ZUNvZGUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgLy8g6aqM6K+B56CB5LiN5Yy65YiG5aSn5bCP5YaZCiAgaWYgKHZhbHVlLnRvU3RyaW5nKCkudG9Mb2NhbGVMb3dlckNhc2UoKSAhPT0gY29kZS50b1N0cmluZygpLnRvTG9jYWxlTG93ZXJDYXNlKCkpIHsKICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6aqM6K+B56CB6L6T5YWl6ZSZ6K+vJykpOwogIH0gZWxzZSB7CiAgICBjYWxsYmFjaygpOwogIH0KfTsKLy8g6Ieq5a6a5LmJ55So5oi35ZCN5qCh6aqM6KeE5YiZCmNvbnN0IHZhbGlkYXRlVXNlcm5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgYXV0aC5jaGVja1VzZXJuYW1lKHJlZ2lzdGVyRm9ybS51c2VybmFtZSkudGhlbihyZXNwID0+IHsKICAgIGlmIChyZXNwLmRhdGEpIHsKICAgICAgY2FsbGJhY2soKTsKICAgIH0gZWxzZSB7CiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign55So5oi35ZCN5bey5a2Y5ZyoJykpOwogICAgfQogIH0pOwp9OwovLyDnmbvlvZXooajljZXnmoTmoKHpqozop4TliJkKY29uc3QgcmVnaXN0ZXJGb3JtUnVsZXMgPSB7CiAgdXNlcm5hbWU6IFt7CiAgICByZXF1aXJlZDogdHJ1ZSwKICAgIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfSwgewogICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVVzZXJuYW1lLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfV0sCiAgdHJ1ZU5hbWU6IFt7CiAgICByZXF1aXJlZDogdHJ1ZSwKICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmgqjnmoTlp5PlkI0nLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfV0sCiAgcGFzc3dvcmQ6IFt7CiAgICByZXF1aXJlZDogdHJ1ZSwKICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfSwgewogICAgbWluOiA1LAogICAgbWVzc2FnZTogJ+WvhueggeS4jeiDveWwj+S6jjXkuKrlrZfnrKYnLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfV0sCiAgY29kZTogW3sKICAgIHJlcXVpcmVkOiB0cnVlLAogICAgbWVzc2FnZTogJ+ivt+i+k+WFpemqjOivgeeggScsCiAgICB0cmlnZ2VyOiAnYmx1cicKICB9LCB7CiAgICB2YWxpZGF0b3I6IHZhbGlkYXRlQ29kZSwKICAgIHRyaWdnZXI6ICdibHVyJwogIH1dCn07CmNvbnN0IHRvTG9naW5QYWdlID0gKCkgPT4gewogIHJvdXRlci5wdXNoKCcvJyk7Cn07Ci8vIOWQjuWPsOeahOmqjOivgeeggQpsZXQgY29kZTsKLy8g5ZCO5Y+w6aqM6K+B56CBaWQKbGV0IGNvZGVJZDsKLy8g6I635Y+W5ZCO5Y+w6aqM6K+B56CBCmNvbnN0IGdldENvZGUgPSAoKSA9PiB7CiAgYXV0aC5nZXRDb2RlKGNvZGVJZCkudGhlbihyZXNwID0+IHsKICAgIGNvZGUgPSByZXNwLmRhdGE7CiAgfSk7Cn07Ci8vIOeCueWHu+WbvueJh+WIt+aWsOmqjOivgeeggQpjb25zdCBjaGFuZ2VDb2RlID0gKCkgPT4gewogIGNvbnN0IGNvZGVJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29kZScpOwogIGNvZGVJZCA9IHV0aWxzLmdldFJhbmRvbUlkKCk7CiAgY29kZUltZy5zcmMgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NBUFRDSEFfVVJMfS91dGlsL2dldENvZGVJbWc/aWQ9YCArIGNvZGVJZDsKICBjb2RlSW1nLm9ubG9hZCA9ICgpID0+IGdldENvZGUoKTsKfTsKCi8vIOihqOWNleS/oeaBr+aPkOS6pApjb25zdCByZWdpc3RlciA9IGZvcm1FbCA9PiB7CiAgdXRpbHMudmFsaWRGb3JtQW5kSW52b2tlKGZvcm1FbCwgKCkgPT4gewogICAgYXV0aC5yZWdpc3RlcihyZWdpc3RlckZvcm0pLnRoZW4ocmVzcCA9PiB7CiAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRob3JpemF0aW9uJywgcmVzcC5kYXRhKTsKICAgICAgICByb3V0ZXIucHVzaCgnL2luZGV4Jyk7CiAgICAgIH0KICAgIH0pOwogIH0sICfms6jlhozlpLHotKUnKTsKfTsKZXhwb3J0IGRlZmF1bHQgewogIC8vIGRhdGEKICBjb2RlLAogIHJlZ2lzdGVyRm9ybSwKICByZWdpc3RlckZvcm1SdWxlcywKICAvLyBtZXRob2QKICB0b0xvZ2luUGFnZSwKICBnZXRDb2RlLAogIGNoYW5nZUNvZGUsCiAgcmVnaXN0ZXIKfTs="},{"version":3,"names":["router","auth","utils","registerForm","username","trueName","password","code","validateCode","rule","value","callback","toString","toLocaleLowerCase","Error","validateUsername","checkUsername","then","resp","data","registerFormRules","required","message","trigger","validator","min","toLoginPage","push","codeId","getCode","changeCode","codeImg","document","querySelector","getRandomId","src","process","env","VUE_APP_CAPTCHA_URL","onload","register","formEl","validFormAndInvoke","localStorage","setItem"],"sources":["D:/termination project/front/src/function-namespace/auth/RegisterFunc.js"],"sourcesContent":["import router from '@/router'\r\nimport auth from '@/api/auth'\r\nimport utils from '@/utils/utils'\r\n\r\n// 注册表单数据信息\r\nconst registerForm = {\r\n  username: '',\r\n  trueName: '',\r\n  password: '',\r\n  code: ''\r\n}\r\n// 自定义验证码校验规则\r\nconst validateCode = (rule, value, callback) => {\r\n  // 验证码不区分大小写\r\n  if (value.toString().toLocaleLowerCase() !== code.toString().toLocaleLowerCase()) {\r\n    callback(new Error('验证码输入错误'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n// 自定义用户名校验规则\r\nconst validateUsername = (rule, value, callback) => {\r\n  auth.checkUsername(registerForm.username)\r\n    .then(resp => {\r\n      if (resp.data) {\r\n        callback()\r\n      } else {\r\n        callback(new Error('用户名已存在'))\r\n      }\r\n    })\r\n}\r\n// 登录表单的校验规则\r\nconst registerFormRules = {\r\n  username: [\r\n    {\r\n      required: true,\r\n      message: '请输入账号',\r\n      trigger: 'blur'\r\n    },\r\n    {\r\n      validator: validateUsername,\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  trueName: [\r\n    {\r\n      required: true,\r\n      message: '请输入您的姓名',\r\n      trigger: 'blur'\r\n    },\r\n  ],\r\n  password: [\r\n    {\r\n      required: true,\r\n      message: '请输入密码',\r\n      trigger: 'blur'\r\n    },\r\n    {\r\n      min: 5,\r\n      message: '密码不能小于5个字符',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  code: [\r\n    {\r\n      required: true,\r\n      message: '请输入验证码',\r\n      trigger: 'blur'\r\n    },\r\n    {\r\n      validator: validateCode,\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n}\r\n\r\nconst toLoginPage = () => {\r\n  router.push('/')\r\n}\r\n// 后台的验证码\r\nlet code\r\n// 后台验证码id\r\nlet codeId\r\n// 获取后台验证码\r\nconst getCode = () => {\r\n  auth.getCode(codeId).then(resp => {\r\n    code = resp.data\r\n  })\r\n}\r\n// 点击图片刷新验证码\r\nconst changeCode = () => {\r\n  const codeImg = document.querySelector('#code')\r\n  codeId = utils.getRandomId();\r\n  codeImg.src = `${process.env.VUE_APP_CAPTCHA_URL}/util/getCodeImg?id=` + codeId\r\n  codeImg.onload = () => getCode()\r\n}\r\n\r\n// 表单信息提交\r\nconst register = (formEl) => {\r\n  utils.validFormAndInvoke(formEl, () => {\r\n    auth.register(registerForm).then(resp => {\r\n      if (resp.code === 200) {\r\n        localStorage.setItem('authorization', resp.data)\r\n        router.push('/index')\r\n      }\r\n    })\r\n  }, '注册失败')\r\n}\r\n\r\nexport default {\r\n  // data\r\n  code,\r\n  registerForm,\r\n  registerFormRules,\r\n  // method\r\n  toLoginPage,\r\n  getCode,\r\n  changeCode,\r\n  register\r\n}\r\n"],"mappings":"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"}]}