{"remainingRequest":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\termination project\\front\\src\\function-namespace\\auth\\LoginFunc.js","dependencies":[{"path":"D:\\termination project\\front\\src\\function-namespace\\auth\\LoginFunc.js","mtime":1682620504554},{"path":"D:\\termination project\\front\\babel.config.js","mtime":1680487519462},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IGF1dGggZnJvbSAnQC9hcGkvYXV0aCc7CmltcG9ydCB1dGlscyBmcm9tICdAL3V0aWxzL3V0aWxzJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi9yb3V0ZXIvaW5kZXgnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CgovLyDnmbvlvZXooajljZXmlbDmja7kv6Hmga8KY29uc3QgbG9naW5Gb3JtID0gewogIHVzZXJuYW1lOiAnJywKICBwYXNzd29yZDogJycsCiAgLy8g6aqM6K+B56CBCiAgY29kZTogJycKfTsKLy8g6Ieq5a6a5LmJ6aqM6K+B56CB5qCh6aqM6KeE5YiZCmNvbnN0IHZhbGlkYXRlQ29kZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAvLyDpqozor4HnoIHkuI3ljLrliIblpKflsI/lhpkKICBpZiAodmFsdWUudG9TdHJpbmcoKS50b0xvY2FsZUxvd2VyQ2FzZSgpICE9PSBjb2RlLnRvU3RyaW5nKCkudG9Mb2NhbGVMb3dlckNhc2UoKSkgewogICAgY2FsbGJhY2sobmV3IEVycm9yKCfpqozor4HnoIHovpPlhaXplJnor68nKSk7CiAgfSBlbHNlIHsKICAgIGNhbGxiYWNrKCk7CiAgfQp9OwovLyDnmbvlvZXooajljZXnmoTmoKHpqozop4TliJkKY29uc3QgbG9naW5Gb3JtUnVsZXMgPSB7CiAgdXNlcm5hbWU6IFt7CiAgICByZXF1aXJlZDogdHJ1ZSwKICAgIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfV0sCiAgcGFzc3dvcmQ6IFt7CiAgICByZXF1aXJlZDogdHJ1ZSwKICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfSwgewogICAgbWluOiA1LAogICAgbWVzc2FnZTogJ+WvhueggeS4jeiDveWwj+S6jjXkuKrlrZfnrKYnLAogICAgdHJpZ2dlcjogJ2JsdXInCiAgfV0sCiAgY29kZTogW3sKICAgIHJlcXVpcmVkOiB0cnVlLAogICAgbWVzc2FnZTogJ+ivt+i+k+WFpemqjOivgeeggScsCiAgICB0cmlnZ2VyOiAnYmx1cicKICB9LCB7CiAgICB2YWxpZGF0b3I6IHZhbGlkYXRlQ29kZSwKICAgIHRyaWdnZXI6ICdibHVyJwogIH1dCn07Ci8vIOWQjuWPsOmqjOivgeeggWlkCmxldCBjb2RlSWQ7Ci8vIOWQjuWPsOeahOmqjOivgeeggQpsZXQgY29kZTsKLy8g6I635Y+W5ZCO5Y+w6aqM6K+B56CBCmNvbnN0IGdldENvZGUgPSAoKSA9PiB7CiAgYXV0aC5nZXRDb2RlKGNvZGVJZCkudGhlbihyZXNwID0+IHsKICAgIGNvZGUgPSByZXNwLmRhdGE7CiAgfSk7Cn07Ci8vIOeCueWHu+WbvueJh+WIt+aWsOmqjOivgeeggQpjb25zdCBjaGFuZ2VDb2RlID0gKCkgPT4gewogIGNvbnN0IGNvZGVJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29kZScpOwogIGNvZGVJZCA9IHV0aWxzLmdldFJhbmRvbUlkKCk7CiAgY29kZUltZy5zcmMgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NBUFRDSEFfVVJMfS91dGlsL2dldENvZGVJbWc/aWQ9YCArIGNvZGVJZDsKICBjb2RlSW1nLm9ubG9hZCA9ICgpID0+IGdldENvZGUoKTsKfTsKY29uc3QgdG9SZWdpc3RlclBhZ2UgPSAoKSA9PiB7CiAgcm91dGVyLnB1c2goJy9yZWdpc3RlcicpOwp9OwovLyDnmbvlvZUKY29uc3QgbG9naW4gPSBmb3JtRWwgPT4gewogIHV0aWxzLnZhbGlkRm9ybUFuZEludm9rZShmb3JtRWwsICgpID0+IHsKICAgIGF1dGgubG9naW4obG9naW5Gb3JtKS50aGVuKHJlc3AgPT4gewogICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aG9yaXphdGlvbicsIHJlc3AuZGF0YSk7CiAgICAgICAgVnVlLnByb3RvdHlwZS4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc15fXicsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOwogICAgICAgIHJvdXRlci5wdXNoKCcvaW5kZXgnKTsKICAgICAgfQogICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgLy/or7fmsYLlh7rplJkKICAgICAgY2hhbmdlQ29kZSgpOwogICAgICBnZXRDb2RlKCk7CiAgICAgIFZ1ZS5wcm90b3R5cGUuJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6ICdUaXBzJywKICAgICAgICBtZXNzYWdlOiBlcnIucmVzcG9uc2UuZGF0YS5lcnJNc2csCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICB9KTsKICAgIH0pOwogIH0pOwp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbG9naW5Gb3JtLAogIGxvZ2luRm9ybVJ1bGVzLAogIGNvZGUsCiAgZ2V0Q29kZSwKICBjaGFuZ2VDb2RlLAogIHRvUmVnaXN0ZXJQYWdlLAogIGxvZ2luCn07"},{"version":3,"names":["auth","utils","router","Vue","loginForm","username","password","code","validateCode","rule","value","callback","toString","toLocaleLowerCase","Error","loginFormRules","required","message","trigger","min","validator","codeId","getCode","then","resp","data","changeCode","codeImg","document","querySelector","getRandomId","src","process","env","VUE_APP_CAPTCHA_URL","onload","toRegisterPage","push","login","formEl","validFormAndInvoke","localStorage","setItem","prototype","$notify","title","type","duration","catch","err","console","log","response","errMsg"],"sources":["D:/termination project/front/src/function-namespace/auth/LoginFunc.js"],"sourcesContent":["import auth from '@/api/auth'\r\nimport utils from '@/utils/utils'\r\nimport router from '../../router/index'\r\nimport Vue from 'vue'\r\n\r\n// 登录表单数据信息\r\nconst loginForm = {\r\n  username: '',\r\n  password: '',\r\n  // 验证码\r\n  code: ''\r\n}\r\n// 自定义验证码校验规则\r\nconst validateCode = (rule, value, callback) => {\r\n  // 验证码不区分大小写\r\n  if (value.toString().toLocaleLowerCase() !== code.toString().toLocaleLowerCase()) {\r\n    callback(new Error('验证码输入错误'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n// 登录表单的校验规则\r\nconst loginFormRules = {\r\n  username: [\r\n    {\r\n      required: true,\r\n      message: '请输入账号',\r\n      trigger: 'blur'\r\n    },\r\n  ],\r\n  password: [\r\n    {\r\n      required: true,\r\n      message: '请输入密码',\r\n      trigger: 'blur'\r\n    },\r\n    {\r\n      min: 5,\r\n      message: '密码不能小于5个字符',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  code: [\r\n    {\r\n      required: true,\r\n      message: '请输入验证码',\r\n      trigger: 'blur'\r\n    },\r\n    {\r\n      validator: validateCode,\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n}\r\n// 后台验证码id\r\nlet codeId\r\n// 后台的验证码\r\nlet code\r\n// 获取后台验证码\r\nconst getCode = () => {\r\n  auth.getCode(codeId).then(resp => {\r\n    code = resp.data\r\n  })\r\n}\r\n// 点击图片刷新验证码\r\nconst changeCode = () => {\r\n  const codeImg = document.querySelector('#code')\r\n  codeId = utils.getRandomId();\r\n  codeImg.src = `${process.env.VUE_APP_CAPTCHA_URL}/util/getCodeImg?id=` + codeId\r\n  codeImg.onload = () => getCode()\r\n}\r\nconst toRegisterPage = () => {\r\n  router.push('/register')\r\n}\r\n// 登录\r\nconst login = (formEl) => {\r\n  utils.validFormAndInvoke(formEl, () => {\r\n    auth.login(loginForm).then(resp => {\r\n      if (resp.code === 200) {\r\n        localStorage.setItem('authorization', resp.data)\r\n        Vue.prototype.$notify({\r\n          title: 'Tips',\r\n          message: 'Login success^_^',\r\n          type: 'success',\r\n          duration: 2000\r\n        })\r\n        router.push('/index')\r\n      }\r\n    }).catch(err => {\r\n      console.log(err)\r\n      //请求出错\r\n      changeCode()\r\n      getCode()\r\n      Vue.prototype.$notify({\r\n        title: 'Tips',\r\n        message: err.response.data.errMsg,\r\n        type: 'error',\r\n        duration: 2000\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nexport default {\r\n  loginForm,\r\n  loginFormRules,\r\n  code,\r\n  getCode,\r\n  changeCode,\r\n  toRegisterPage,\r\n  login\r\n}\r\n"],"mappings":"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"}]}