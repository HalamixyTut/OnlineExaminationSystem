{"remainingRequest":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\termination project\\front\\src\\views\\teacher\\MarkExamPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\termination project\\front\\src\\views\\teacher\\MarkExamPage.vue","mtime":1683868178774},{"path":"D:\\termination project\\front\\babel.config.js","mtime":1680487519462},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBleGFtIGZyb20gJ0AvYXBpL2V4YW0nOwppbXBvcnQgbWFya0V4YW0gZnJvbSAnQC9hcGkvbWFya0V4YW0nOwppbXBvcnQgcXVlc3Rpb24gZnJvbSAnQC9hcGkvcXVlc3Rpb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01hcmtFeGFtUGFnZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v6ICD6K+V6K6w5b2V5L+h5oGvCiAgICAgIGV4YW1SZWNvcmQ6IHt9LAogICAgICAvL+iAg+ivleeahOS/oeaBrwogICAgICBleGFtSW5mbzoge30sCiAgICAgIC8v5b2T5YmN6ICD6K+V55qE6aKY55uuCiAgICAgIHF1ZXN0aW9uSW5mbzogW10sCiAgICAgIC8v6aG16Z2i5Yqg6L29CiAgICAgIGxvYWRpbmc6IHt9LAogICAgICAvL+etlOahiOeahOmAiemhueWQjWFiY2TmlbDmja4KICAgICAgb3B0aW9uTmFtZTogWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXSwKICAgICAgLy/lm77niYflm57mmL7nmoR1cmwKICAgICAgYmlnSW1nVXJsOiAnJywKICAgICAgLy/lm77niYflm57mmL7nmoTlr7nor53moYbmmK/lkKbmmL7npLoKICAgICAgYmlnSW1nRGlhbG9nOiBmYWxzZSwKICAgICAgLy/nlKjmiLflm57nrZTnmoTnrZTmoYgKICAgICAgdXNlckFuc3dlcjogW10sCiAgICAgIC8v5Y2V6aKY55qE5YiG5YC8CiAgICAgIHF1ZXN0aW9uU2NvcmU6IG5ldyBNYXAoKSwKICAgICAgLy/or5rkv6HogIPor5XnmoTlm77niYfnmoTlr7nor53moYYKICAgICAgY3JlZGl0RGlhbG9nOiBmYWxzZQogICAgfTsKICB9LAogIHByb3BzOiBbJ3RhZ0luZm8nXSwKICBjcmVhdGVkKCkgewogICAgLy/kuIDliJvlu7rlsLHmlLnlj5jlpLTpg6jnmoTpnaLljIXlsZEKICAgIHRoaXMuJGVtaXQoJ2dpdmVDaGlsZENoYW5nZUJyZWFrSW5mbycsICdFeGFtaW5hdGlvbiByZXN1bHQnLCAnRXhhbWluYXRpb24gcmVzdWx0Jyk7CiAgICB0aGlzLmNyZWF0ZVRhZ3NJblBhcmVudCgpOwogICAgdGhpcy5nZXRFeGFtUmVjb3JkKCk7CgogICAgLy/pobXpnaLmlbDmja7liqDovb3nmoTnrYnlvoXnirbmgIHmoI8KICAgIHRoaXMubG9hZGluZyA9IHRoaXMuJExvYWRpbmcuc2VydmljZSh7CiAgICAgIGJvZHk6IHRydWUsCiAgICAgIGxvY2s6IHRydWUsCiAgICAgIHRleHQ6ICfmlbDmja7mi7zlkb3liqDovb3kuK0sKCrilbnilr3ilbkqKScsCiAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnCiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5ZCR54i257uE5Lu25Lit5re75Yqg5aS06YOo55qEdGFnc+agh+etvgogICAgY3JlYXRlVGFnc0luUGFyZW50KCkgewogICAgICBsZXQgZmxhZyA9IGZhbHNlOwogICAgICB0aGlzLnRhZ0luZm8ubWFwKGl0ZW0gPT4gewogICAgICAgIC8v5aaC5p6cdGFnc+WFqOmDqOespuWQiAogICAgICAgIGlmIChpdGVtLm5hbWUgPT09ICfmibnpmIXor5XljbcnICYmIGl0ZW0udXJsID09PSB0aGlzLiRyb3V0ZS5wYXRoKSB7CiAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ubmFtZSA9PT0gJ+aJuemYheivleWNtycgJiYgaXRlbS51cmwgIT09IHRoaXMuJHJvdXRlLnBhdGgpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZVRhZ0luZm8nLCAn5om56ZiF6K+V5Y23JywgdGhpcy4kcm91dGUucGF0aCk7CiAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoIWZsYWcpIHRoaXMuJGVtaXQoJ2dpdmVDaGlsZEFkZFRhZycsICfmibnpmIXor5XljbcnLCB0aGlzLiRyb3V0ZS5wYXRoKTsKICAgIH0sCiAgICAvL+afpeivoueUqOaIt+W9k+aXtuiAg+ivleeahOS/oeaBrwogICAgYXN5bmMgZ2V0RXhhbVJlY29yZCgpIHsKICAgICAgYXdhaXQgZXhhbS5nZXRFeGFtUmVjb3JkQnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMucmVjb3JkSWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmV4YW1SZWNvcmQgPSByZXNwLmRhdGE7CiAgICAgICAgICB0aGlzLmdldEV4YW1JbmZvQnlJZChyZXNwLmRhdGEuZXhhbUlkKTsKICAgICAgICAgIHRoaXMudXNlckFuc3dlciA9IHJlc3AuZGF0YS51c2VyQW5zd2Vycy5zcGxpdCgnLScpOwogICAgICAgICAgLy/ojrflj5bljZXpopjnmoTliIblgLwKICAgICAgICAgIHRoaXMuZ2V0UXVlc3Rpb25TY29yZShyZXNwLmRhdGEuZXhhbUlkKTsKICAgICAgICAgIC8v6I635Y+W5omA5pyJ6aKY55uu5L+h5oGvCiAgICAgICAgICB0aGlzLmdldFF1ZXN0aW9uSW5mb0J5SWRzKHJlc3AuZGF0YS5xdWVzdGlvbklkcyk7CiAgICAgICAgICAvL+aVsOaNruWKoOi9veWujOavlQogICAgICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNruiAg+ivlWlk5p+l6K+i6ICD6K+V5L+h5oGvCiAgICBnZXRFeGFtSW5mb0J5SWQoZXhhbUlkKSB7CiAgICAgIGV4YW0uZ2V0RXhhbUluZm9CeUlkKHsKICAgICAgICAnZXhhbUlkJzogZXhhbUlkCiAgICAgIH0pLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB0aGlzLmV4YW1JbmZvID0gcmVzcC5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlkc+afpeivoumimOebruS/oeaBrwogICAgYXN5bmMgZ2V0UXVlc3Rpb25JbmZvQnlJZHMocXVlc3Rpb25JZHMpIHsKICAgICAgYXdhaXQgcXVlc3Rpb24uZ2V0UXVlc3Rpb25CeUlkcyh7CiAgICAgICAgaWRzOiBxdWVzdGlvbklkcwogICAgICB9KS50aGVuKHJlc3AgPT4gewogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdmFyIF9yZXNwJGRhdGE7CiAgICAgICAgICB0aGlzLnF1ZXN0aW9uSW5mbyA9IChyZXNwID09PSBudWxsIHx8IHJlc3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVzcCRkYXRhID0gcmVzcC5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcCRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcCRkYXRhLmRhdGEpIHx8IFtdOwogICAgICAgICAgdGhpcy5xdWVzdGlvbkluZm8uZm9yRWFjaChxID0+IHsKICAgICAgICAgICAgaWYgKHEucXVlc3Rpb25UeXBlID09PSA0KSB7CiAgICAgICAgICAgICAgcS5zY29yZSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgLy/ph43nva7pl67popjnmoTpobrluo8g5Y2V6YCJIOWkmumAiSDliKTmlq0g566A562UCiAgICAgICAgICB0aGlzLnF1ZXN0aW9uSW5mbyA9IHRoaXMucXVlc3Rpb25JbmZvLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIGEucXVlc3Rpb25UeXBlIC0gYi5xdWVzdGlvblR5cGU7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v54K55Ye75bGV56S66auY5riF5aSn5Zu+CiAgICBzaG93QmlnSW1nKHVybCkgewogICAgICB0aGlzLmJpZ0ltZ1VybCA9IHVybDsKICAgICAgdGhpcy5iaWdJbWdEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIC8v5qC55o2u6ICD6K+VaWTmn6Xor6LogIPor5XkuK3mr4/kuIDpopjnmoTliIbmlbAKICAgIGFzeW5jIGdldFF1ZXN0aW9uU2NvcmUoZXhhbUlkKSB7CiAgICAgIGF3YWl0IGV4YW0uZ2V0RXhhbVF1ZXN0aW9uQnlFeGFtSWQoZXhhbUlkKS50aGVuKHJlc3AgPT4gewogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgLy/orr7nva7ljZXpopjliIblgLznu5ltYXAKICAgICAgICAgIGNvbnN0IHNjb3JlcyA9IHJlc3AuZGF0YS5zY29yZXMuc3BsaXQoJywnKTsKICAgICAgICAgIHJlc3AuZGF0YS5xdWVzdGlvbklkcy5zcGxpdCgnLCcpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIC8vIHRoaXMuJHNldCh0aGlzLnF1ZXN0aW9uU2NvcmUsIGl0ZW0sIHNjb3Jlc1tpbmRleF0pCiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25TY29yZS5zZXQoaXRlbSwgc2NvcmVzW2luZGV4XSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5o+Q5Lqk6ZiF5Y23CiAgICB1cGxvYWRNYXJrRXhhbSgpIHsKICAgICAgLy/lrqLop4LpopjnmoTliIbmlbAKICAgICAgbGV0IG90aGVyU2NvcmUgPSAwOwogICAgICB0aGlzLnF1ZXN0aW9uSW5mby5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLnF1ZXN0aW9uVHlwZSA9PT0gNCkgewogICAgICAgICAgb3RoZXJTY29yZSArPSBpdGVtLnNjb3JlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGxldCB0b3RhbFNjb3JlID0gdGhpcy5leGFtUmVjb3JkLmxvZ2ljU2NvcmUgKyBvdGhlclNjb3JlOwogICAgICBtYXJrRXhhbS5tYXJrRXhhbSh7CiAgICAgICAgJ3RvdGFsU2NvcmUnOiB0b3RhbFNjb3JlLAogICAgICAgICdleGFtUmVjb3JkSWQnOiB0aGlzLiRyb3V0ZS5wYXJhbXMucmVjb3JkSWQKICAgICAgfSkudGhlbihyZXNwID0+IHsKICAgICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3AubWVzc2FnZSwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL21hcmtNYW5hZ2UnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["exam","markExam","question","name","data","examRecord","examInfo","questionInfo","loading","optionName","bigImgUrl","bigImgDialog","userAnswer","questionScore","Map","creditDialog","props","created","$emit","createTagsInParent","getExamRecord","$Loading","service","body","lock","text","spinner","methods","flag","tagInfo","map","item","url","$route","path","getExamRecordById","params","recordId","then","resp","code","getExamInfoById","examId","userAnswers","split","getQuestionScore","getQuestionInfoByIds","questionIds","close","getQuestionByIds","ids","_resp$data","forEach","q","questionType","score","sort","a","b","showBigImg","getExamQuestionByExamId","scores","index","set","uploadMarkExam","otherScore","totalScore","logicScore","$notify","title","message","type","duration","$router","push"],"sources":["src/views/teacher/MarkExamPage.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-header height=\"180\">\r\n      <el-card style=\"height: 180px\">\r\n        <span class=\"examName\">{{ examInfo.examName }}</span>\r\n        <span class=\"examTime\">{{ examRecord.examTime }}</span>\r\n\r\n        <el-row style=\"margin-top: 55px;\">\r\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"包括(单选,多选,判断题)\" placement=\"top-start\">\r\n             <span style=\"font-weight: 800;font-size: 17px\">\r\n          Logic question score: {{ examRecord.logicScore }}</span>\r\n          </el-tooltip>\r\n\r\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"简答题与逻辑题\" placement=\"top-start\">\r\n          <span style=\"float: right;font-weight: 800;font-size: 17px\">\r\n          Total score: {{ examInfo.totalScore }}</span>\r\n          </el-tooltip>\r\n        </el-row>\r\n\r\n      </el-card>\r\n\r\n    </el-header>\r\n\r\n    <el-main>\r\n      <el-card>\r\n        <!--题目信息-->\r\n        <div v-for=\"(item,index) in questionInfo\" :key=\"index\" style=\"margin-top: 15px\">\r\n          <div>\r\n            <i class=\"num\">{{ index + 1 }}</i>\r\n            <span v-if=\"item.questionType === 1\">【Single choice】</span>\r\n            <span v-else-if=\"item.questionType === 2\">【Multiple choice】</span>\r\n            <span v-else-if=\"item.questionType === 3\">【True or false】</span>\r\n            <span v-else>【Short answer】</span>\r\n            <span>{{ item.questionContent }}:</span>\r\n            <span style=\"color: red;font-style: italic;font-weight: 400;\">&nbsp;\r\n              {{ questionScore.get(String(item.questionId)) }}分</span>\r\n          </div>\r\n          <!--题目中的配图-->\r\n          <img v-for=\"url in item.images\" :src=\"url\" title=\"点击查看大图\" alt=\"题目图片\"\r\n               style=\"width: 100px;height: 100px;cursor: pointer\" @click=\"showBigImg(url)\">\r\n\r\n          <!--单选 和 判断 的答案列表-->\r\n          <div style=\"margin-top: 25px\"\r\n               v-show=\"item.questionType === 1 || item.questionType === 3\">\r\n            <div class=\"el-radio-group\">\r\n              <label v-for=\"(i2,index2) in item.answer\"\r\n                     :class=\"String(index2) === userAnswer[index] && i2.isTrue === 'true' ?\r\n                      'activeAndTrue' : String(index2) === userAnswer[index] ? 'active' :\r\n                       i2.isTrue === 'true' ? 'true' : ''\">\r\n                <span>{{ optionName[index2] + '、' + i2.answer }}</span>\r\n                <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"点击查看大图\"\r\n                     v-if=\"i2.images !== null\"\r\n                     v-for=\"i3 in i2.images\" :src=\"i3\" alt=\"\" @mouseover=\"showBigImg(i3)\">\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <!--多选的答案列表-->\r\n          <div style=\"margin-top: 25px\" v-show=\"item.questionType === 2\">\r\n            <div class=\"el-radio-group\">\r\n              <label v-for=\"(i2,index2) in item.answer\"\r\n                     :class=\"(userAnswer[index]+'').indexOf(index2+'') !== -1 && i2.isTrue === 'true'\r\n                     ? 'activeAndTrue' : (userAnswer[index]+'').indexOf(index2+'') !== -1 ? 'active' :\r\n                       i2.isTrue === 'true' ? 'true' : ''\">\r\n                <span>{{ optionName[index] + '、' + i2.answer }}</span>\r\n                <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"点击查看大图\"\r\n                     v-if=\"i2.images !== null\"\r\n                     v-for=\"i3 in i2.images\" :src=\"i3\" alt=\"\" @mouseover=\"showBigImg(i3)\">\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <!--简答题的答案-->\r\n          <div style=\"margin-top: 25px\" v-if=\"item.questionType === 4\">\r\n            <div class=\"ques-analysis\">\r\n              <h3 style=\"font-weight: 400\">My answer：</h3>\r\n              <p style=\"font-weight: 400;color: orange\"> {{ userAnswer[index] }} </p>\r\n            </div>\r\n            <span>Score：</span>\r\n            <el-input-number v-model=\"item.score\" :min=\"0\"\r\n                             :max=\"parseInt(questionScore.get(String(item.questionId)))\"></el-input-number>\r\n          </div>\r\n\r\n        </div>\r\n\r\n\r\n      </el-card>\r\n      <el-button size=\"small\" style=\"margin-top: 25px\" type=\"primary\" @click=\"uploadMarkExam\">Submit</el-button>\r\n    </el-main>\r\n\r\n    <!--图片回显-->\r\n    <el-dialog :visible.sync=\"bigImgDialog\" @close=\"bigImgDialog = false\">\r\n      <img style=\"width: 100%\" :src=\"bigImgUrl\">\r\n    </el-dialog>\r\n\r\n    <!--诚信考试图片-->\r\n    <el-dialog :visible.sync=\"creditDialog\" @close=\"creditDialog = false\">\r\n      <img style=\"width: 100%\" :src=\"item\" v-for=\"item in examRecord.creditImgUrl.split(',')\">\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport exam from '@/api/exam'\r\nimport markExam from '@/api/markExam'\r\nimport question from '@/api/question'\r\n\r\nexport default {\r\n  name: 'MarkExamPage',\r\n  data () {\r\n    return {\r\n      //考试记录信息\r\n      examRecord: {},\r\n      //考试的信息\r\n      examInfo: {},\r\n      //当前考试的题目\r\n      questionInfo: [],\r\n      //页面加载\r\n      loading: {},\r\n      //答案的选项名abcd数据\r\n      optionName: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\r\n      //图片回显的url\r\n      bigImgUrl: '',\r\n      //图片回显的对话框是否显示\r\n      bigImgDialog: false,\r\n      //用户回答的答案\r\n      userAnswer: [],\r\n      //单题的分值\r\n      questionScore: new Map(),\r\n      //诚信考试的图片的对话框\r\n      creditDialog: false\r\n    }\r\n  },\r\n  props: ['tagInfo'],\r\n  created () {\r\n    //一创建就改变头部的面包屑\r\n    this.$emit('giveChildChangeBreakInfo', 'Examination result', 'Examination result')\r\n    this.createTagsInParent()\r\n    this.getExamRecord()\r\n\r\n    //页面数据加载的等待状态栏\r\n    this.loading = this.$Loading.service({\r\n      body: true,\r\n      lock: true,\r\n      text: '数据拼命加载中,(*╹▽╹*)',\r\n      spinner: 'el-icon-loading',\r\n    })\r\n  },\r\n  methods: {\r\n    //向父组件中添加头部的tags标签\r\n    createTagsInParent () {\r\n      let flag = false\r\n      this.tagInfo.map(item => {\r\n        //如果tags全部符合\r\n        if (item.name === '批阅试卷' && item.url === this.$route.path) {\r\n          flag = true\r\n        } else if (item.name === '批阅试卷' && item.url !== this.$route.path) {\r\n          this.$emit('updateTagInfo', '批阅试卷', this.$route.path)\r\n          flag = true\r\n        }\r\n      })\r\n      if (!flag) this.$emit('giveChildAddTag', '批阅试卷', this.$route.path)\r\n    },\r\n    //查询用户当时考试的信息\r\n    async getExamRecord () {\r\n      await exam.getExamRecordById(this.$route.params.recordId).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.examRecord = resp.data\r\n          this.getExamInfoById(resp.data.examId)\r\n          this.userAnswer = resp.data.userAnswers.split('-')\r\n          //获取单题的分值\r\n          this.getQuestionScore(resp.data.examId)\r\n          //获取所有题目信息\r\n          this.getQuestionInfoByIds(resp.data.questionIds)\r\n          //数据加载完毕\r\n          this.loading.close()\r\n        }\r\n      })\r\n    },\r\n    //根据考试id查询考试信息\r\n    getExamInfoById (examId) {\r\n      exam.getExamInfoById({ 'examId': examId }).then((resp) => {\r\n        if (resp.code === 200) this.examInfo = resp.data\r\n      })\r\n    },\r\n    //根据ids查询题目信息\r\n    async getQuestionInfoByIds (questionIds) {\r\n      await question.getQuestionByIds({ ids: questionIds }).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.questionInfo = resp?.data?.data || []\r\n          this.questionInfo.forEach(q => {\r\n            if (q.questionType === 4) {\r\n              q.score = 0\r\n            }\r\n          })\r\n          //重置问题的顺序 单选 多选 判断 简答\r\n          this.questionInfo = this.questionInfo.sort(function (a, b) {\r\n            return a.questionType - b.questionType\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //点击展示高清大图\r\n    showBigImg (url) {\r\n      this.bigImgUrl = url\r\n      this.bigImgDialog = true\r\n    },\r\n    //根据考试id查询考试中每一题的分数\r\n    async getQuestionScore (examId) {\r\n      await exam.getExamQuestionByExamId(examId).then((resp) => {\r\n        if (resp.code === 200) {\r\n          //设置单题分值给map\r\n          const scores = resp.data.scores.split(',')\r\n          resp.data.questionIds.split(',').forEach((item, index) => {\r\n            // this.$set(this.questionScore, item, scores[index])\r\n            this.questionScore.set(item, scores[index])\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //提交阅卷\r\n    uploadMarkExam () {\r\n      //客观题的分数\r\n      let otherScore = 0\r\n      this.questionInfo.forEach(item => {\r\n        if (item.questionType === 4) {\r\n          otherScore += item.score\r\n        }\r\n      })\r\n      let totalScore = this.examRecord.logicScore + otherScore\r\n      markExam.markExam({\r\n        'totalScore': totalScore,\r\n        'examRecordId': this.$route.params.recordId\r\n      }).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.$notify({\r\n            title: 'Tips',\r\n            message: resp.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.$router.push('/markManage')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/css/teacher/markExamPage\";\r\n</style>\r\n"],"mappings":";AAyGA,OAAAA,IAAA;AACA,OAAAC,QAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,UAAA;MACA;MACAC,QAAA;MACA;MACAC,YAAA;MACA;MACAC,OAAA;MACA;MACAC,UAAA;MACA;MACAC,SAAA;MACA;MACAC,YAAA;MACA;MACAC,UAAA;MACA;MACAC,aAAA,MAAAC,GAAA;MACA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;EACAC,QAAA;IACA;IACA,KAAAC,KAAA;IACA,KAAAC,kBAAA;IACA,KAAAC,aAAA;;IAEA;IACA,KAAAZ,OAAA,QAAAa,QAAA,CAAAC,OAAA;MACAC,IAAA;MACAC,IAAA;MACAC,IAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACA;IACAR,mBAAA;MACA,IAAAS,IAAA;MACA,KAAAC,OAAA,CAAAC,GAAA,CAAAC,IAAA;QACA;QACA,IAAAA,IAAA,CAAA5B,IAAA,eAAA4B,IAAA,CAAAC,GAAA,UAAAC,MAAA,CAAAC,IAAA;UACAN,IAAA;QACA,WAAAG,IAAA,CAAA5B,IAAA,eAAA4B,IAAA,CAAAC,GAAA,UAAAC,MAAA,CAAAC,IAAA;UACA,KAAAhB,KAAA,+BAAAe,MAAA,CAAAC,IAAA;UACAN,IAAA;QACA;MACA;MACA,KAAAA,IAAA,OAAAV,KAAA,iCAAAe,MAAA,CAAAC,IAAA;IACA;IACA;IACA,MAAAd,cAAA;MACA,MAAApB,IAAA,CAAAmC,iBAAA,MAAAF,MAAA,CAAAG,MAAA,CAAAC,QAAA,EAAAC,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,IAAA;UACA,KAAAnC,UAAA,GAAAkC,IAAA,CAAAnC,IAAA;UACA,KAAAqC,eAAA,CAAAF,IAAA,CAAAnC,IAAA,CAAAsC,MAAA;UACA,KAAA9B,UAAA,GAAA2B,IAAA,CAAAnC,IAAA,CAAAuC,WAAA,CAAAC,KAAA;UACA;UACA,KAAAC,gBAAA,CAAAN,IAAA,CAAAnC,IAAA,CAAAsC,MAAA;UACA;UACA,KAAAI,oBAAA,CAAAP,IAAA,CAAAnC,IAAA,CAAA2C,WAAA;UACA;UACA,KAAAvC,OAAA,CAAAwC,KAAA;QACA;MACA;IACA;IACA;IACAP,gBAAAC,MAAA;MACA1C,IAAA,CAAAyC,eAAA;QAAA,UAAAC;MAAA,GAAAJ,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,IAAA,eAAAlC,QAAA,GAAAiC,IAAA,CAAAnC,IAAA;MACA;IACA;IACA;IACA,MAAA0C,qBAAAC,WAAA;MACA,MAAA7C,QAAA,CAAA+C,gBAAA;QAAAC,GAAA,EAAAH;MAAA,GAAAT,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,IAAA;UAAA,IAAAW,UAAA;UACA,KAAA5C,YAAA,IAAAgC,IAAA,aAAAA,IAAA,wBAAAY,UAAA,GAAAZ,IAAA,CAAAnC,IAAA,cAAA+C,UAAA,uBAAAA,UAAA,CAAA/C,IAAA;UACA,KAAAG,YAAA,CAAA6C,OAAA,CAAAC,CAAA;YACA,IAAAA,CAAA,CAAAC,YAAA;cACAD,CAAA,CAAAE,KAAA;YACA;UACA;UACA;UACA,KAAAhD,YAAA,QAAAA,YAAA,CAAAiD,IAAA,WAAAC,CAAA,EAAAC,CAAA;YACA,OAAAD,CAAA,CAAAH,YAAA,GAAAI,CAAA,CAAAJ,YAAA;UACA;QACA;MACA;IACA;IACA;IACAK,WAAA3B,GAAA;MACA,KAAAtB,SAAA,GAAAsB,GAAA;MACA,KAAArB,YAAA;IACA;IACA;IACA,MAAAkC,iBAAAH,MAAA;MACA,MAAA1C,IAAA,CAAA4D,uBAAA,CAAAlB,MAAA,EAAAJ,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,IAAA;UACA;UACA,MAAAqB,MAAA,GAAAtB,IAAA,CAAAnC,IAAA,CAAAyD,MAAA,CAAAjB,KAAA;UACAL,IAAA,CAAAnC,IAAA,CAAA2C,WAAA,CAAAH,KAAA,MAAAQ,OAAA,EAAArB,IAAA,EAAA+B,KAAA;YACA;YACA,KAAAjD,aAAA,CAAAkD,GAAA,CAAAhC,IAAA,EAAA8B,MAAA,CAAAC,KAAA;UACA;QACA;MACA;IACA;IACA;IACAE,eAAA;MACA;MACA,IAAAC,UAAA;MACA,KAAA1D,YAAA,CAAA6C,OAAA,CAAArB,IAAA;QACA,IAAAA,IAAA,CAAAuB,YAAA;UACAW,UAAA,IAAAlC,IAAA,CAAAwB,KAAA;QACA;MACA;MACA,IAAAW,UAAA,QAAA7D,UAAA,CAAA8D,UAAA,GAAAF,UAAA;MACAhE,QAAA,CAAAA,QAAA;QACA,cAAAiE,UAAA;QACA,qBAAAjC,MAAA,CAAAG,MAAA,CAAAC;MACA,GAAAC,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,IAAA;UACA,KAAA4B,OAAA;YACAC,KAAA;YACAC,OAAA,EAAA/B,IAAA,CAAA+B,OAAA;YACAC,IAAA;YACAC,QAAA;UACA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA;IACA;EACA;AACA"}]}