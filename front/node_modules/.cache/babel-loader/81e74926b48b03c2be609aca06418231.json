{"remainingRequest":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\termination project\\front\\src\\views\\student\\ExamPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\termination project\\front\\src\\views\\student\\ExamPage.vue","mtime":1682621396224},{"path":"D:\\termination project\\front\\babel.config.js","mtime":1680487519462},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBleGFtIGZyb20gJ0AvYXBpL2V4YW0nOwppbXBvcnQgcXVlc3Rpb24gZnJvbSAnQC9hcGkvcXVlc3Rpb24nOwppbXBvcnQgb3NzVXRpbHMgZnJvbSAnQC9hcGkvb3NzVXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0V4YW1QYWdlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/lvZPliY3ogIPor5XnmoTkv6Hmga8KICAgICAgZXhhbUluZm86IHt9LAogICAgICAvL+W9k+WJjeeahOiAg+ivlemimOebrgogICAgICBxdWVzdGlvbkluZm86IFt7CiAgICAgICAgcXVlc3Rpb25UeXBlOiAnJwogICAgICB9XSwKICAgICAgLy/lvZPliY3popjnm67nmoTntKLlvJXlgLwKICAgICAgY3VySW5kZXg6IDAsCiAgICAgIC8v5o6n5Yi25aSn5Zu+55qE5a+56K+d5qGGCiAgICAgIGJpZ0ltZ0RpYWxvZzogZmFsc2UsCiAgICAgIC8v5b2T5YmN6KaB5bGV56S655qE5aSn5Zu+55qEdXJsCiAgICAgIGJpZ0ltZ1VybDogJycsCiAgICAgIC8v55So5oi36YCJ5oup55qE562U5qGICiAgICAgIHVzZXJBbnN3ZXI6IFtdLAogICAgICAvL+mhtemdouaVsOaNruWKoOi9vQogICAgICBsb2FkaW5nOiB7fSwKICAgICAgLy/pobXpnaLnu5jliLbmmK/lkKblvIDlp4sKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIC8v562U5qGI55qE6YCJ6aG55ZCNYWJjZOaVsOaNrgogICAgICBvcHRpb25OYW1lOiBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddLAogICAgICAvL+iAg+ivleaAu+aXtumVvwogICAgICBkdXJhdGlvbjogMCwKICAgICAgLy/mkYTlg4/lpLTlr7nosaEKICAgICAgbWVkaWFTdHJlYW1UcmFjazogbnVsbCwKICAgICAgLy/or5rkv6HnhafniYfnmoR1cmwKICAgICAgdGFrZVBob3RvVXJsOiBbXSwKICAgICAgLy/mkYTlg4/lpLTmmK/lkKblvIDlkK8KICAgICAgY2FtZXJhT246IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RXhhbUluZm8oKTsKICAgIC8v6aG16Z2i5pWw5o2u5Yqg6L2955qE562J5b6F54q25oCB5qCPCiAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLiRMb2FkaW5nLnNlcnZpY2UoewogICAgICBib2R5OiB0cnVlLAogICAgICBsb2NrOiB0cnVlLAogICAgICB0ZXh0OiAn5pWw5o2u5ou85ZG95Yqg6L295LitLCgq4pW54pa94pW5KiknLAogICAgICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJwogICAgfSk7CiAgfSwKICBtb3VudGVkKCkgewogICAgLy/lhbPpl63mtY/op4jlmajnqpflj6PnmoTml7blgJnnp7vpmaQgbG9jYWxzdG9yYWdl55qE5pe26ZW/CiAgICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsgLy/lj5blvpfmtY/op4jlmajnmoR1c2VyQWdlbnTlrZfnrKbkuLIKICAgIHZhciBpc09wZXJhID0gdXNlckFnZW50LmluZGV4T2YoJ09wZXJhJykgPiAtMTsgLy/liKTmlq3mmK/lkKZPcGVyYea1j+iniOWZqAogICAgdmFyIGlzSUUgPSB1c2VyQWdlbnQuaW5kZXhPZignY29tcGF0aWJsZScpID4gLTEgJiYgdXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSA+IC0xICYmICFpc09wZXJhOyAvL+WIpOaWreaYr+WQpklF5rWP6KeI5ZmoCiAgICB2YXIgaXNJRTExID0gdXNlckFnZW50LmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xOyAvL+WIpOaWreaYr+WQpuaYr0lFMTHmtY/op4jlmagKICAgIHZhciBpc0VkZ2UgPSB1c2VyQWdlbnQuaW5kZXhPZignRWRnZScpID4gLTEgJiYgIWlzSUU7IC8v5Yik5pat5piv5ZCmSUXnmoRFZGdl5rWP6KeI5ZmoCiAgICBpZiAoIWlzSUUgJiYgIWlzRWRnZSAmJiAhaXNJRTExKSB7CiAgICAgIC8v5YW85a65Y2hyb21l5ZKMZmlyZWZveAogICAgICB2YXIgX2JlZm9yZVVubG9hZF90aW1lID0gMCwKICAgICAgICBfZ2FwX3RpbWUgPSAwOwogICAgICB2YXIgaXNfZmlyZUZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID4gLTE7IC8v5piv5ZCm5piv54Gr54uQ5rWP6KeI5ZmoCiAgICAgIHdpbmRvdy5vbnVubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfZ2FwX3RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIF9iZWZvcmVVbmxvYWRfdGltZTsKICAgICAgICBpZiAoX2dhcF90aW1lIDw9IDUpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdleGFtRHVyYXRpb24nICsgdGhpcy5leGFtSW5mby5leGFtSWQpOwogICAgICAgIH0gZWxzZSB7Ly/osLfmrYzmtY/op4jlmajliLfmlrAKICAgICAgICB9CiAgICAgIH07CiAgICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfYmVmb3JlVW5sb2FkX3RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBpZiAoaXNfZmlyZUZveCkgey8v54Gr54uQ5YWz6Zet5omn6KGMCiAgICAgICAgfSBlbHNlIHsvL+eBq+eLkOa1j+iniOWZqOWIt+aWsAogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5p+l6K+i5b2T5YmN6ICD6K+V55qE5L+h5oGvCiAgICBnZXRFeGFtSW5mbygpIHsKICAgICAgZXhhbS5nZXRFeGFtSW5mb0J5SWQodGhpcy4kcm91dGUucGFyYW1zKS50aGVuKHJlc3AgPT4gewogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5leGFtSW5mbyA9IHJlc3AuZGF0YTsKICAgICAgICAgIC8v6K6+572u5a6a5pe2KOenkikKICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhhbUR1cmF0aW9uJyArIHRoaXMuZXhhbUluZm8uZXhhbUlkKSA9PT0gJzAnKSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZXhhbUR1cmF0aW9uJyArIHRoaXMuZXhhbUluZm8uZXhhbUlkKTsKICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhhbUR1cmF0aW9uJyArIHRoaXMuZXhhbUluZm8uZXhhbUlkKSB8fCByZXNwLmRhdGEuZXhhbUR1cmF0aW9uICogNjA7CiAgICAgICAgICAvL+iAg+ivleWJqeS9meaXtumXtOWumuaXtuWZqAogICAgICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uID4gMCkgdGhpcy5kdXJhdGlvbi0tOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB0aGlzLmdldFF1ZXN0aW9uSW5mbyhyZXNwLmRhdGEucXVlc3Rpb25JZHMuc3BsaXQoJywnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+afpeivouiAg+ivleeahOmimOebruS/oeaBrwogICAgYXN5bmMgZ2V0UXVlc3Rpb25JbmZvKGlkcykgewogICAgICBhd2FpdCBxdWVzdGlvbi5nZXRRdWVzdGlvbkJ5SWRzKHsKICAgICAgICAnaWRzJzogaWRzLmpvaW4oJywnKQogICAgICB9KS50aGVuKHJlc3AgPT4gewogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdmFyIF9yZXNwJGRhdGE7CiAgICAgICAgICB0aGlzLnF1ZXN0aW9uSW5mbyA9IChyZXNwID09PSBudWxsIHx8IHJlc3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVzcCRkYXRhID0gcmVzcC5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcCRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcCRkYXRhLmRhdGEpIHx8IFtdOwogICAgICAgICAgLy/ph43nva7pl67popjnmoTpobrluo8g5Y2V6YCJIOWkmumAiSDliKTmlq0g566A562UCiAgICAgICAgICB0aGlzLnF1ZXN0aW9uSW5mbyA9IHRoaXMucXVlc3Rpb25JbmZvLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIGEucXVlc3Rpb25UeXBlIC0gYi5xdWVzdGlvblR5cGU7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTsKICAgICAgdGhpcy5zaG93ID0gdHJ1ZTsKICAgIH0sCiAgICAvL+eCueWHu+WxleekuumrmOa4heWkp+WbvgogICAgc2hvd0JpZ0ltZyh1cmwpIHsKICAgICAgdGhpcy5iaWdJbWdVcmwgPSB1cmw7CiAgICAgIHRoaXMuYmlnSW1nRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICAvL+ajgOmqjOWNlemAiemimOeahOeUqOaIt+mAieaLqeeahOetlOahiAogICAgY2hlY2tTaW5nbGVBbnN3ZXIoaW5kZXgpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMudXNlckFuc3dlciwgdGhpcy5jdXJJbmRleCwgaW5kZXgpOwogICAgfSwKICAgIC8v5aSa6YCJ6aKY55So5oi355qE562U5qGI6YCJ5LitCiAgICBzZWxlY3RlZE11bHRpcGxlQW5zd2VyKGluZGV4KSB7CiAgICAgIGlmICh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8v5b2T5YmN5piv5aSa6YCJ55qE56ys5LiA5Liq562U5qGICiAgICAgICAgdGhpcy4kc2V0KHRoaXMudXNlckFuc3dlciwgdGhpcy5jdXJJbmRleCwgaW5kZXgpOwogICAgICB9IGVsc2UgaWYgKFN0cmluZyh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0pLnNwbGl0KCcsJykuaW5jbHVkZXMoaW5kZXggKyAnJykpIHsKICAgICAgICAvL+WPlua2iOmAieS4rQogICAgICAgIGxldCBuZXdBcnIgPSBbXTsKICAgICAgICBTdHJpbmcodGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdKS5zcGxpdCgnLCcpLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBpZiAoaXRlbSAhPT0gJycgKyBpbmRleCkgbmV3QXJyLnB1c2goaXRlbSk7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKG5ld0Fyci5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnVzZXJBbnN3ZXIsIHRoaXMuY3VySW5kZXgsIHVuZGVmaW5lZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnVzZXJBbnN3ZXIsIHRoaXMuY3VySW5kZXgsIG5ld0Fyci5qb2luKCcsJykpOwogICAgICAgICAgLy/nrZTmoYjmoLzlvI/ljJbpobrluo9EQkFDIC0+IEFCQ0QKICAgICAgICAgIHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSA9IFN0cmluZyh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0pLnNwbGl0KCcsJykuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gYSAtIGI7CiAgICAgICAgICB9KS5qb2luKCcsJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCEodGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdICsgJycpLnNwbGl0KCcsJykuaW5jbHVkZXMoaW5kZXggKyAnJykpIHsKICAgICAgICAvL+esrG7kuKrnrZTmoYgKICAgICAgICB0aGlzLiRzZXQodGhpcy51c2VyQW5zd2VyLCB0aGlzLmN1ckluZGV4LCB0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0gKz0gJywnICsgaW5kZXgpOwogICAgICAgIC8v562U5qGI5qC85byP5YyW6aG65bqPREJBQyAtPiBBQkNECiAgICAgICAgdGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdID0gU3RyaW5nKHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSkuc3BsaXQoJywnKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYSAtIGI7CiAgICAgICAgfSkuam9pbignLCcpOwogICAgICB9CiAgICB9LAogICAgLy/kuIrkvKDnlKjmiLfogIPor5Xkv6Hmga/ov5vlhaXlkI7lj7AKICAgIGFzeW5jIHVwbG9hZEV4YW1Ub0FkbWluKCkgewogICAgICBpZiAodGhpcy5jYW1lcmFPbikgYXdhaXQgdGhpcy50YWtlUGhvdG8oKTsgLy/nu5PmnZ/nmoTml7blgJnmi43nhafkuIrkvKDkuIDlvKAKICAgICAgLy8g5q2j5YiZCiAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCctJywgJ2cnKTsKICAgICAgLy8g5Y675o6J55So5oi36L6T5YWl55qE6Z2e5rOV5YiG5Ymy56ym5Y+3KC0pLOS/neivgeWQjuerr+aOpeWPl+aVsOaNruWkhOeQhuS4jeaKpemUmQogICAgICB0aGlzLnVzZXJBbnN3ZXIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBpZiAodGhpcy5xdWVzdGlvbkluZm9baW5kZXhdLnF1ZXN0aW9uVHlwZSA9PT0gNCkgewogICAgICAgICAgLy/nroDnrZTpopjnrZTmoYjlpITnkIYKICAgICAgICAgIHRoaXMudXNlckFuc3dlcltpbmRleF0gPSBpdGVtLnJlcGxhY2UocmVnLCAnICcpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyDmoIforrDpopjnm67mmK/lkKblhajpg6jlgZrlrowKICAgICAgbGV0IGZsYWcgPSB0cnVlOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudXNlckFuc3dlci5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIOajgOa1i+eUqOaIt+aYr+WQpumimOebruWFqOmDqOWBmuWujAogICAgICAgIGlmICh0aGlzLnVzZXJBbnN3ZXJbaV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyDlpoLmnpznlKjmiLfmiYDmnInnrZTmoYjnmoTmlbDnu4Tplb/luqblsI/kuo7popjnm67plb/luqYs6L+Z5Liq5pe25YCZ5Lmf6KaB5bCG5qCH5b+X5L2N572u5Li6ZmFsc2UKICAgICAgaWYgKHRoaXMudXNlckFuc3dlci5sZW5ndGggPCB0aGlzLnF1ZXN0aW9uSW5mby5sZW5ndGgpIHsKICAgICAgICBmbGFnID0gZmFsc2U7CiAgICAgIH0KICAgICAgLy/popjnm67mnKrlgZrlrowKICAgICAgaWYgKCFmbGFnKSB7CiAgICAgICAgLy8gaWYgKHRoaXMudXNlckFuc3dlci5zb21lKChpdGVtKSA9PiBpdGVtID09PSB1bmRlZmluZWQpKSB7CiAgICAgICAgdGhpcy4kY29uZmlybSgnc29tZSBxdWVzdGlvbnMgYXJlIHN0aWxsIG5vdCBhbnN3ZXJlZCwgc3RpbGwgc3VibWl0PyBvKOKVpe+5j+KVpSlvID8nLCAnVGlwcycsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnY29uZmlybScsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnY2FuY2VsJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSB7fTsKICAgICAgICAgIGRhdGEucXVlc3Rpb25JZHMgPSBbXTsKICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMgPSB0aGlzLnVzZXJBbnN3ZXIuam9pbignLScpOwogICAgICAgICAgdGhpcy5xdWVzdGlvbkluZm8uZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgZGF0YS5xdWVzdGlvbklkcy5wdXNoKGl0ZW0ucXVlc3Rpb25JZCk7CiAgICAgICAgICAgIC8v5b2T5YmN5pWw5o2u5LiN5a6M5pW0LOeUqOaIt+WbnuetlOS4jeWujOaVtCjmiJHku6zoh6rliqjooaXlhYXnqbrnrZTmoYgs6Ziy5q2i5Lia5Yqh5Ye66ZSZKQogICAgICAgICAgICBpZiAoaW5kZXggPiB0aGlzLnVzZXJBbnN3ZXIubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMgKz0gJy0gJzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAvL+WmguaenOaJgOaciemimOebruWFqOmDqOacquetlAogICAgICAgICAgaWYgKHRoaXMudXNlckFuc3dlci5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhpcy5xdWVzdGlvbkluZm8uZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzICs9ICcgLSc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzLnNwbGl0KDAsIGRhdGEudXNlckFuc3dlcnMubGVuZ3RoIC0gMSk7CiAgICAgICAgICB9CiAgICAgICAgICBkYXRhLmV4YW1JZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5leGFtSWQpOwogICAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IGRhdGEucXVlc3Rpb25JZHMuam9pbignLCcpOwogICAgICAgICAgZGF0YS5jcmVkaXRJbWdVcmwgPSB0aGlzLnRha2VQaG90b1VybC5qb2luKCcsJyk7CiAgICAgICAgICBleGFtLmFkZEV4YW1SZWNvcmQoZGF0YSkudGhlbihyZXNwID0+IHsKICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZW5kIG9mIGV4YW0gKl7ilr1eKicsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZXhhbVJlc3VsdC8nICsgcmVzcC5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdUaXBzJywKICAgICAgICAgICAgbWVzc2FnZTogJ2tlZXAgdHJ5aW5nISAqXuKWvV4qJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/lvZPliY3popjnm67lgZrlrozkuoYKCiAgICAgICAgbGV0IGRhdGEgPSB7fTsKICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzID0gW107CiAgICAgICAgZGF0YS51c2VyQW5zd2VycyA9IHRoaXMudXNlckFuc3dlci5qb2luKCctJyk7CiAgICAgICAgZGF0YS5leGFtSWQgPSBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuZXhhbUlkKTsKICAgICAgICBkYXRhLmNyZWRpdEltZ1VybCA9IHRoaXMudGFrZVBob3RvVXJsLmpvaW4oJywnKTsKICAgICAgICB0aGlzLnF1ZXN0aW9uSW5mby5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgZGF0YS5xdWVzdGlvbklkcy5wdXNoKGl0ZW0ucXVlc3Rpb25JZCk7CiAgICAgICAgfSk7CiAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IGRhdGEucXVlc3Rpb25JZHMuam9pbignLCcpOwogICAgICAgIGV4YW0uYWRkRXhhbVJlY29yZChkYXRhKS50aGVuKHJlc3AgPT4gewogICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICdUaXBzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAnZW5kIG9mIGV4YW0gKl7ilr1eKicsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2V4YW1SZXN1bHQvJyArIHJlc3AuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvL+ebkeaOp+iAg+ivleeahOWJqeS9meaXtumXtAogICAgYXN5bmMgZHVyYXRpb24obmV3VmFsKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleGFtRHVyYXRpb24nICsgdGhpcy5leGFtSW5mby5leGFtSWQsIG5ld1ZhbCk7CiAgICAgIC8v5pGE5YOP5aS05pWw5o2uCiAgICAgIGxldCBjb25zdHJhaW50cyA9IHsKICAgICAgICB2aWRlbzogewogICAgICAgICAgd2lkdGg6IDIwMCwKICAgICAgICAgIGhlaWdodDogMjAwCiAgICAgICAgfSwKICAgICAgICBhdWRpbzogZmFsc2UKICAgICAgfTsKICAgICAgLy/pgJrov4fosIPnlKjmkYTlg4/lpLTliKTmlq3nlKjmiLfmmK/lkKbkuK3pgJTlhbPpl63mkYTlg4/lpLQKICAgICAgbGV0IHByb21pc2UgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cyk7CiAgICAgIHByb21pc2UuY2F0Y2goYmFjayA9PiB7CiAgICAgICAgdGhpcy5jYW1lcmFPbiA9IGZhbHNlOwogICAgICB9KTsKICAgICAgaWYgKCF0aGlzLmNhbWVyYU9uKSB7CiAgICAgICAgLy/lpoLmnpzmkYTlg4/lpLTmnKrlvIDlkK8s5bCx5YaN5qyh6LCD55So5byA5ZCvCiAgICAgICAgdGhpcy5nZXRDYW1lcmEoKTsKICAgICAgfQogICAgICAvL+iAg+ivleaXtumXtOe7k+adn+S6huaPkOS6pOivleWNtwogICAgICBpZiAobmV3VmFsIDwgMSkgewogICAgICAgIGxldCBkYXRhID0ge307CiAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IFtdOwogICAgICAgIGRhdGEudXNlckFuc3dlcnMgPSB0aGlzLnVzZXJBbnN3ZXIuam9pbignLScpOwogICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzLnB1c2goaXRlbS5xdWVzdGlvbklkKTsKICAgICAgICAgIC8v5b2T5YmN5pWw5o2u5LiN5a6M5pW0LOeUqOaIt+WbnuetlOS4jeWujOaVtCjmiJHku6zoh6rliqjooaXlhYXnqbrnrZTmoYgs6Ziy5q2i5Lia5Yqh5Ye66ZSZKQogICAgICAgICAgaWYgKGluZGV4ID4gdGhpcy51c2VyQW5zd2VyLmxlbmd0aCkgewogICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzICs9ICcgLSc7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy/lpoLmnpzmiYDmnInpopjnm67lhajpg6jmnKrnrZQKICAgICAgICBpZiAoZGF0YS51c2VyQW5zd2VycyA9PT0gJycpIHsKICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMgKz0gJyAtJzsKICAgICAgICAgIH0pOwogICAgICAgICAgZGF0YS51c2VyQW5zd2Vycy5zcGxpdCgwLCBkYXRhLnVzZXJBbnN3ZXJzLmxlbmd0aCAtIDEpOwogICAgICAgIH0KICAgICAgICBkYXRhLmV4YW1JZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5leGFtSWQpOwogICAgICAgIGRhdGEucXVlc3Rpb25JZHMgPSBkYXRhLnF1ZXN0aW9uSWRzLmpvaW4oJywnKTsKICAgICAgICBkYXRhLmNyZWRpdEltZ1VybCA9IHRoaXMudGFrZVBob3RvVXJsLmpvaW4oJywnKTsKICAgICAgICBleGFtLmFkZEV4YW1SZWNvcmQoZGF0YSkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ3JlbWFpbmluZyB0aW1lIGlzIHplcm8sIGV4YW0gc3VibWl0dGVkIGF1dG9tYXRpY2FsbHkgKl7ilr1eKicsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2V4YW1SZXN1bHQvJyArIHJlc3AuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["exam","question","ossUtils","name","data","examInfo","questionInfo","questionType","curIndex","bigImgDialog","bigImgUrl","userAnswer","loading","show","optionName","duration","mediaStreamTrack","takePhotoUrl","cameraOn","created","getExamInfo","$Loading","service","body","lock","text","spinner","mounted","userAgent","navigator","isOpera","indexOf","isIE","isIE11","isEdge","_beforeUnload_time","_gap_time","is_fireFox","window","onunload","Date","getTime","localStorage","removeItem","examId","onbeforeunload","methods","getExamInfoById","$route","params","then","resp","code","getItem","examDuration","timer","setInterval","getQuestionInfo","questionIds","split","ids","getQuestionByIds","join","_resp$data","sort","a","b","close","showBigImg","url","checkSingleAnswer","index","$set","selectedMultipleAnswer","undefined","String","includes","newArr","forEach","item","push","length","uploadExamToAdmin","takePhoto","reg","RegExp","replace","flag","i","$confirm","confirmButtonText","cancelButtonText","type","userAnswers","questionId","parseInt","creditImgUrl","addExamRecord","$notify","title","message","$router","catch","watch","newVal","setItem","constraints","video","width","height","audio","promise","mediaDevices","getUserMedia","back","getCamera"],"sources":["src/views/student/ExamPage.vue"],"sourcesContent":["<template>\r\n\r\n  <el-container v-if=\"show\">\r\n    <el-header style=\"margin-top: 60px\">\r\n      <el-row>\r\n        <el-col :span=\"18\" :offset=\"3\" style=\"border-bottom: 1px solid #f5f5f5\">\r\n          <span class=\"startExam\">exam began</span>\r\n          <span class=\"examTitle\">time remaining: </span>\r\n          <span style=\"color: red;font-size: 18px;\">{{ duration | timeFormat }}</span>\r\n          <el-button type=\"warning\" round\r\n                     style=\"background-color: #ffd550;float: right;color: black;font-weight: 800\"\r\n                     @click=\"uploadExamToAdmin\">submit\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-header>\r\n\r\n    <el-main>\r\n      <el-row>\r\n        <el-col :span=\"18\" :offset=\"3\">\r\n          <el-col :span=\"16\">\r\n            <el-card style=\"min-height: 500px\">\r\n              <!--题目信息-->\r\n              <div>\r\n                <i class=\"num\">{{ curIndex + 1 }}</i>\r\n                <span v-if=\"questionInfo[curIndex].questionType === 1\">【choose the best answer】</span>\r\n                <span v-else-if=\"questionInfo[curIndex].questionType === 2\">【from the answers below, choose all that applies】</span>\r\n                <span v-else-if=\"questionInfo[curIndex].questionType === 3\">【true or false】</span>\r\n                <span v-else>【short answer】</span>\r\n                <span>{{ questionInfo[curIndex].questionContent }}:</span>\r\n              </div>\r\n              <!--题目中的配图-->\r\n              <img v-for=\"url in questionInfo[curIndex].images\" :src=\"url\" title=\"click to enhance image\" alt=\"image\"\r\n                   style=\"width: 100px;height: 100px;cursor: pointer\" @click=\"showBigImg(url)\">\r\n\r\n              <!--单选 和 判断 的答案列表-->\r\n              <div style=\"margin-top: 25px\"\r\n                   v-show=\"questionInfo[curIndex].questionType === 1 || questionInfo[curIndex].questionType === 3\">\r\n                <div class=\"el-radio-group\">\r\n                  <label v-for=\"(item,index) in questionInfo[curIndex].answer\"\r\n                         @click=\"checkSingleAnswer(index)\"\r\n                         :class=\"index === userAnswer[curIndex] ? 'active' : ''\">\r\n                    <span>{{ optionName[index] + '、' + item.answer }}</span>\r\n                    <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"click to enhance image\"\r\n                         v-if=\"item.images !== null\"\r\n                         v-for=\"i2 in item.images\" :src=\"i2\" alt=\"\" @mouseover=\"showBigImg(i2)\">\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <!--多选的答案列表-->\r\n              <div style=\"margin-top: 25px\" v-show=\"questionInfo[curIndex].questionType === 2\">\r\n                <div class=\"el-radio-group\">\r\n                  <label v-for=\"(item,index) in questionInfo[curIndex].answer\"\r\n                         @click=\"selectedMultipleAnswer(index)\"\r\n                         :class=\"(userAnswer[curIndex]+'').indexOf(index+'') !== -1? 'active' : ''\">\r\n                    <span>{{ optionName[index] + '、' + item.answer }}</span>\r\n                    <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"click to enhance image\"\r\n                         v-if=\"item.images !== null\"\r\n                         v-for=\"i2 in item.images\" :src=\"i2\" alt=\"\" @mouseover=\"showBigImg(i2)\">\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <!--简答题的答案-->\r\n              <div style=\"margin-top: 25px\" v-show=\"questionInfo[curIndex].questionType === 4\">\r\n                <el-input\r\n                  type=\"textarea\"\r\n                  :rows=\"8\"\r\n                  placeholder=\"please input your answer here\"\r\n                  v-model=\"userAnswer[curIndex]\">\r\n                </el-input>\r\n              </div>\r\n\r\n              <!--上一题 下一题-->\r\n              <div style=\"margin-top: 25px\">\r\n                <el-button type=\"primary\" icon=\"el-icon-back\" :disabled=\"curIndex<1\" @click=\"curIndex--\">previous</el-button>\r\n                <el-button type=\"primary\" icon=\"el-icon-right\" :disabled=\"curIndex>=questionInfo.length-1\"\r\n                           @click=\"curIndex++\">next\r\n                </el-button>\r\n              </div>\r\n\r\n            </el-card>\r\n          </el-col>\r\n\r\n          <el-col :span=\"7\" :offset=\"1\">\r\n            <!--答题卡卡片-->\r\n            <el-card>\r\n              <div>\r\n                <p style=\"font-size: 18px;\">Overview</p>\r\n                <div style=\"margin-top: 25px\">\r\n                  <span\r\n                    style=\"background-color: rgb(238,238,238);padding: 5px 10px 5px 10px;margin-left: 15px\">not answered</span>\r\n                  <span style=\"background-color: rgb(87,148,247);color: white;\r\n                padding: 5px 10px 5px 10px;margin-left: 15px\">answered</span>\r\n                </div>\r\n              </div>\r\n\r\n              <!--单选的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">choose the best answer</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 1\"\r\n                           :class=\"questionInfo[item-1].questionType === 1 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n\r\n              <!--多选的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">choose all that applies</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 2\"\r\n                           :class=\"questionInfo[item-1].questionType === 2 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n\r\n              <!--判断的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">true or false</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 3\"\r\n                           :class=\"questionInfo[item-1].questionType === 3 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n\r\n              <!--简答的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">short answers</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 4\"\r\n                           :class=\"questionInfo[item-1].questionType === 4 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n\r\n        </el-col>\r\n      </el-row>\r\n      <video id=\"video\" muted=\"muted\" style=\"float:right;position: fixed;top: 80%;left: 85%\" width=\"200px\"\r\n             height=\"200px\" autoplay=\"autoplay\"></video>\r\n      <canvas id=\"canvas\" hidden width=\"200px\" height=\"200px\"></canvas>\r\n    </el-main>\r\n    <!--图片回显-->\r\n    <el-dialog :visible.sync=\"bigImgDialog\" @close=\"bigImgDialog = false\">\r\n      <img style=\"width: 100%\" :src=\"bigImgUrl\">\r\n    </el-dialog>\r\n  </el-container>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport exam from '@/api/exam'\r\nimport question from '@/api/question'\r\nimport ossUtils from '@/api/ossUtils'\r\n\r\nexport default {\r\n  name: 'ExamPage',\r\n  data () {\r\n    return {\r\n      //当前考试的信息\r\n      examInfo: {},\r\n      //当前的考试题目\r\n      questionInfo: [\r\n        {\r\n          questionType: ''\r\n        }\r\n      ],\r\n      //当前题目的索引值\r\n      curIndex: 0,\r\n      //控制大图的对话框\r\n      bigImgDialog: false,\r\n      //当前要展示的大图的url\r\n      bigImgUrl: '',\r\n      //用户选择的答案\r\n      userAnswer: [],\r\n      //页面数据加载\r\n      loading: {},\r\n      //页面绘制是否开始\r\n      show: false,\r\n      //答案的选项名abcd数据\r\n      optionName: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\r\n      //考试总时长\r\n      duration: 0,\r\n      //摄像头对象\r\n      mediaStreamTrack: null,\r\n      //诚信照片的url\r\n      takePhotoUrl: [],\r\n      //摄像头是否开启\r\n      cameraOn: false,\r\n    }\r\n  },\r\n  created () {\r\n    this.getExamInfo()\r\n    //页面数据加载的等待状态栏\r\n    this.loading = this.$Loading.service({\r\n      body: true,\r\n      lock: true,\r\n      text: '数据拼命加载中,(*╹▽╹*)',\r\n      spinner: 'el-icon-loading',\r\n    })\r\n    \r\n  },\r\n  mounted () {\r\n    //关闭浏览器窗口的时候移除 localstorage的时长\r\n    var userAgent = navigator.userAgent //取得浏览器的userAgent字符串\r\n    var isOpera = userAgent.indexOf('Opera') > -1 //判断是否Opera浏览器\r\n    var isIE = userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1 && !isOpera //判断是否IE浏览器\r\n    var isIE11 = userAgent.indexOf('rv:11.0') > -1 //判断是否是IE11浏览器\r\n    var isEdge = userAgent.indexOf('Edge') > -1 && !isIE //判断是否IE的Edge浏览器\r\n    if (!isIE && !isEdge && !isIE11) {//兼容chrome和firefox\r\n      var _beforeUnload_time = 0, _gap_time = 0\r\n      var is_fireFox = navigator.userAgent.indexOf('Firefox') > -1//是否是火狐浏览器\r\n      window.onunload = function () {\r\n        _gap_time = new Date().getTime() - _beforeUnload_time\r\n        if (_gap_time <= 5) {\r\n          localStorage.removeItem('examDuration' + this.examInfo.examId)\r\n        } else {//谷歌浏览器刷新\r\n        }\r\n      }\r\n      window.onbeforeunload = function () {\r\n        _beforeUnload_time = new Date().getTime()\r\n        if (is_fireFox) {//火狐关闭执行\r\n\r\n        } else {//火狐浏览器刷新\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //查询当前考试的信息\r\n    getExamInfo () {\r\n      exam.getExamInfoById(this.$route.params).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.examInfo = resp.data\r\n          //设置定时(秒)\r\n          if (localStorage.getItem('examDuration' + this.examInfo.examId) === '0') localStorage.removeItem('examDuration' + this.examInfo.examId)\r\n          this.duration = localStorage.getItem('examDuration' + this.examInfo.examId) || resp.data.examDuration * 60\r\n          //考试剩余时间定时器\r\n          this.timer = window.setInterval(() => {\r\n            if (this.duration > 0) this.duration--\r\n          }, 1000)\r\n          this.getQuestionInfo(resp.data.questionIds.split(','))\r\n        }\r\n      })\r\n    },\r\n    //查询考试的题目信息\r\n    async getQuestionInfo (ids) {\r\n      await question.getQuestionByIds({ 'ids': ids.join(',') }).then(resp => {\r\n        if (resp.code === 200) {\r\n          this.questionInfo = resp?.data?.data || []\r\n          //重置问题的顺序 单选 多选 判断 简答\r\n          this.questionInfo = this.questionInfo.sort(function (a, b) {\r\n            return a.questionType - b.questionType\r\n          })\r\n        }\r\n      })\r\n      this.loading.close()\r\n      this.show = true\r\n    },\r\n    //点击展示高清大图\r\n    showBigImg (url) {\r\n      this.bigImgUrl = url\r\n      this.bigImgDialog = true\r\n    },\r\n    //检验单选题的用户选择的答案\r\n    checkSingleAnswer (index) {\r\n      this.$set(this.userAnswer, this.curIndex, index)\r\n    },\r\n    //多选题用户的答案选中\r\n    selectedMultipleAnswer (index) {\r\n      if (this.userAnswer[this.curIndex] === undefined) {//当前是多选的第一个答案\r\n        this.$set(this.userAnswer, this.curIndex, index)\r\n      } else if (String(this.userAnswer[this.curIndex]).split(',').includes(index + '')) {//取消选中\r\n        let newArr = []\r\n        String(this.userAnswer[this.curIndex]).split(',').forEach(item => {\r\n          if (item !== '' + index) newArr.push(item)\r\n        })\r\n        if (newArr.length === 0) {\r\n          this.$set(this.userAnswer, this.curIndex, undefined)\r\n        } else {\r\n          this.$set(this.userAnswer, this.curIndex, newArr.join(','))\r\n          //答案格式化顺序DBAC -> ABCD\r\n          this.userAnswer[this.curIndex] = String(this.userAnswer[this.curIndex]).split(',').sort(function (a, b) {\r\n            return a - b\r\n          }).join(',')\r\n        }\r\n      } else if (!((this.userAnswer[this.curIndex] + '').split(',').includes(index + ''))) {//第n个答案\r\n        this.$set(this.userAnswer, this.curIndex, this.userAnswer[this.curIndex] += ',' + index)\r\n        //答案格式化顺序DBAC -> ABCD\r\n        this.userAnswer[this.curIndex] = String(this.userAnswer[this.curIndex]).split(',').sort(function (a, b) {\r\n          return a - b\r\n        }).join(',')\r\n      }\r\n    },\r\n    \r\n    //上传用户考试信息进入后台\r\n    async uploadExamToAdmin () {\r\n      if (this.cameraOn) await this.takePhoto()//结束的时候拍照上传一张\r\n      // 正则\r\n      var reg = new RegExp('-', 'g')\r\n      // 去掉用户输入的非法分割符号(-),保证后端接受数据处理不报错\r\n      this.userAnswer.forEach((item, index) => {\r\n        if (this.questionInfo[index].questionType === 4) {//简答题答案处理\r\n          this.userAnswer[index] = item.replace(reg, ' ')\r\n        }\r\n      })\r\n\r\n      // 标记题目是否全部做完\r\n      let flag = true\r\n      for (let i = 0; i < this.userAnswer.length; i++) {// 检测用户是否题目全部做完\r\n        if (this.userAnswer[i] === undefined) {\r\n          flag = false\r\n        }\r\n      }\r\n      // 如果用户所有答案的数组长度小于题目长度,这个时候也要将标志位置为false\r\n      if (this.userAnswer.length < this.questionInfo.length) {\r\n        flag = false\r\n      }\r\n      //题目未做完\r\n      if (!flag) {\r\n        // if (this.userAnswer.some((item) => item === undefined)) {\r\n        this.$confirm('some questions are still not answered, still submit? o(╥﹏╥)o ?', 'Tips', {\r\n          confirmButtonText: 'confirm',\r\n          cancelButtonText: 'cancel',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          let data = {}\r\n          data.questionIds = []\r\n          data.userAnswers = this.userAnswer.join('-')\r\n          this.questionInfo.forEach((item, index) => {\r\n            data.questionIds.push(item.questionId)\r\n            //当前数据不完整,用户回答不完整(我们自动补充空答案,防止业务出错)\r\n            if (index > (this.userAnswer.length - 1)) {\r\n              data.userAnswers += '- '\r\n            }\r\n          })\r\n          //如果所有题目全部未答\r\n          if (this.userAnswer.length === 0) {\r\n            this.questionInfo.forEach(item => {\r\n              data.userAnswers += ' -'\r\n            })\r\n            data.userAnswers.split(0, data.userAnswers.length - 1)\r\n          }\r\n          data.examId = parseInt(this.$route.params.examId)\r\n          data.questionIds = data.questionIds.join(',')\r\n          data.creditImgUrl = this.takePhotoUrl.join(',')\r\n          exam.addExamRecord(data).then((resp) => {\r\n            if (resp.code === 200) {\r\n              this.$notify({\r\n                title: 'Tips',\r\n                message: 'end of exam *^▽^*',\r\n                type: 'success',\r\n                duration: 2000\r\n              })\r\n              this.$router.push('/examResult/' + resp.data)\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          this.$notify({\r\n            title: 'Tips',\r\n            message: 'keep trying! *^▽^*',\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n        })\r\n      } else {//当前题目做完了\r\n        \r\n        let data = {}\r\n        data.questionIds = []\r\n        data.userAnswers = this.userAnswer.join('-')\r\n        data.examId = parseInt(this.$route.params.examId)\r\n        data.creditImgUrl = this.takePhotoUrl.join(',')\r\n        this.questionInfo.forEach((item, index) => {\r\n          data.questionIds.push(item.questionId)\r\n        })\r\n        data.questionIds = data.questionIds.join(',')\r\n        exam.addExamRecord(data).then((resp) => {\r\n          if (resp.code === 200) {\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: 'end of exam *^▽^*',\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n            this.$router.push('/examResult/' + resp.data)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    //监控考试的剩余时间\r\n    async duration (newVal) {\r\n      localStorage.setItem('examDuration' + this.examInfo.examId, newVal)\r\n      //摄像头数据\r\n      let constraints = {\r\n        video: {\r\n          width: 200,\r\n          height: 200\r\n        },\r\n        audio: false\r\n      }\r\n      //通过调用摄像头判断用户是否中途关闭摄像头\r\n      let promise = navigator.mediaDevices.getUserMedia(constraints)\r\n      promise.catch((back) => {\r\n        this.cameraOn = false\r\n      })\r\n      if (!this.cameraOn) {//如果摄像头未开启,就再次调用开启\r\n        this.getCamera()\r\n      }\r\n      //考试时间结束了提交试卷\r\n      if (newVal < 1) {\r\n        \r\n        let data = {}\r\n        data.questionIds = []\r\n        data.userAnswers = this.userAnswer.join('-')\r\n        this.questionInfo.forEach((item, index) => {\r\n          data.questionIds.push(item.questionId)\r\n          //当前数据不完整,用户回答不完整(我们自动补充空答案,防止业务出错)\r\n          if (index > this.userAnswer.length) {\r\n            data.userAnswers += ' -'\r\n          }\r\n        })\r\n        //如果所有题目全部未答\r\n        if (data.userAnswers === '') {\r\n          this.questionInfo.forEach(item => {\r\n            data.userAnswers += ' -'\r\n          })\r\n          data.userAnswers.split(0, data.userAnswers.length - 1)\r\n        }\r\n        data.examId = parseInt(this.$route.params.examId)\r\n\r\n        data.questionIds = data.questionIds.join(',')\r\n        data.creditImgUrl = this.takePhotoUrl.join(',')\r\n        exam.addExamRecord(data).then((resp) => {\r\n          if (resp.code === 200) {\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: 'remaining time is zero, exam submitted automatically *^▽^*',\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n            this.$router.push('/examResult/' + resp.data)\r\n          }\r\n        })\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/css/student/examPage\";\r\n</style>\r\n"],"mappings":"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"}]}