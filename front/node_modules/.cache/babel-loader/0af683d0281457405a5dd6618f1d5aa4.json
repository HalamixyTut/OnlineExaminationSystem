{"remainingRequest":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\termination project\\front\\src\\views\\admin\\NoticeManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\termination project\\front\\src\\views\\admin\\NoticeManage.vue","mtime":1680487519538},{"path":"D:\\termination project\\front\\babel.config.js","mtime":1680487519462},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vIOWvvOWFpeWvjOaWh+acrOe8lui+keWZqAppbXBvcnQgRSBmcm9tICd3YW5nZWRpdG9yJzsKaW1wb3J0IG5vdGljZSBmcm9tICdAL2FwaS9ub3RpY2UnOwppbXBvcnQgdXRpbHMgZnJvbSAnQC91dGlscy91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTm90aWNlTWFuYWdlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/mn6Xor6LlhazlkYrnmoTlj4LmlbAKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgJ25vdGljZUNvbnRlbnQnOiAnJywKICAgICAgICAncGFnZU5vJzogMSwKICAgICAgICAncGFnZVNpemUnOiAxMAogICAgICB9LAogICAgICAvL+S4i+aLiemAieaLqeahhueahOaVsOaNrgogICAgICBvcHRpb25JbmZvOiBbewogICAgICAgICdsYWJlbCc6ICfliKDpmaQnLAogICAgICAgICdkZXNjJzogJ2RlbGV0ZScKICAgICAgfV0sCiAgICAgIC8v5LiL5ouJ5qGG5omA6YCJ5oup55qE5pWw5o2uCiAgICAgIHNlbGVjdGVkOiAnJywKICAgICAgLy8g5omA5pyJ5YWs5ZGK5L+h5oGvCiAgICAgIG5vdGljZUluZm86IFtdLAogICAgICAvLyDooajmoLzmlbDmja7pooTliqDovb0KICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy8g5YWs5ZGK5oC75pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDooqvpgInkuK3nmoTooajmoLzooYwKICAgICAgc2VsZWN0ZWRJblRhYmxlOiBbXSwKICAgICAgLy8g5Y+R5biD5YWs5ZGK5a+56K+d5qGGCiAgICAgIHB1Ymxpc2hUYWJsZVZpc2libGU6IGZhbHNlLAogICAgICAvLyDlj5HluIPnmoTooajljZUKICAgICAgcHVibGlzaEZvcm06IHsKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBzdGF0dXM6ICcxJwogICAgICB9LAogICAgICBwdWJsaXNoRm9ybVJ1bGVzOiB7CiAgICAgICAgY29udGVudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWFrOWRiuWGheWuuScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICAvLyDlj5HluIPlhazlkYrnmoTlr4zmlofmnKznvJbovpHlmagKICAgICAgcHVibGlzaEVkaXRvcjogbnVsbCwKICAgICAgLy8g5pu05paw5YWs5ZGK55qE5a+M5paH5pys57yW6L6R5ZmoCiAgICAgIHVwZGF0ZUVkaXRvcjogbnVsbCwKICAgICAgLy8g5pu05paw5YWs5ZGK55qE5a+56K+d5qGG5piv5ZCm5bGV56S6CiAgICAgIHVwZGF0ZVRhYmxlVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOabtOaWsOeahOihqOWNlQogICAgICB1cGRhdGVGb3JtOiB7CiAgICAgICAgbmlkOiAnJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBzdGF0dXM6ICcnCiAgICAgIH0sCiAgICAgIHVwZGF0ZUZvcm1SdWxlczogewogICAgICAgIGNvbnRlbnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlhazlkYrlhoXlrrknLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgLy8g5b2T5YmN5pu05paw55qE5YWs5ZGK55qE5L+h5oGvCiAgICAgIGN1cnJlbnRVcGRhdGVOb3RpY2VTdGF0dXM6ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Tm90aWNlSW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/ojrflj5bnlKjmiLfkv6Hmga8KICAgIGdldE5vdGljZUluZm8oKSB7CiAgICAgIG5vdGljZS5nZXRBbGxOb3RpY2UodGhpcy5xdWVyeUluZm8pLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm5vdGljZUluZm8gPSByZXNwLmRhdGEuZGF0YTsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwLmRhdGEudG90YWw7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdUaXBzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+iOt+WPluS/oeaBr+Wksei0pScsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v6KGo5qC85p+Q5LiA6KGM6KKr6YCJ5LitCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRJblRhYmxlID0gdmFsOwogICAgfSwKICAgIC8v5YiG6aG15o+S5Lu255qE5aSn5bCP5pS55Y+YCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IHZhbDsKICAgICAgdGhpcy5nZXROb3RpY2VJbmZvKCk7CiAgICB9LAogICAgLy/liIbpobXmj5Lku7bnmoTpobXmlbAKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VObyA9IHZhbDsKICAgICAgdGhpcy5nZXROb3RpY2VJbmZvKCk7CiAgICB9LAogICAgLy/lip/og73kuIvmi4nmoYbooqvpgInmi6kKICAgIHNlbGVjdENoYW5nZSh2YWwpIHsKICAgICAgLy/muIXnqbrkuIrkuIDmrKHnmoTmk43kvZwKICAgICAgdGhpcy5zZWxlY3RlZCA9ICcnOwogICAgICAvL+ihqOagvOS4reaJgOmAieS4reeahOWFrOWRiueahGlkCiAgICAgIGxldCBpZHMgPSBbXTsKICAgICAgdGhpcy5zZWxlY3RlZEluVGFibGUubWFwKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLnN0YXR1cyAhPT0gMSkgewogICAgICAgICAgLy8gKirpmLLmraLliKDpmaTlvZPliY3kvb/nlKjlhazlkYoKICAgICAgICAgIGlkcy5wdXNoKGl0ZW0ubmlkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAodmFsID09PSAnZGVsZXRlJykgewogICAgICAgIC8v5Yig6ZmkCiAgICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4jeWFgeiuuOWIoOmZpOW9k+WJjeS9v+eUqOWFrOWRiicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub3RpY2UuZGVsZXRlTm90aWNlKHsKICAgICAgICAgICAgJ2lkcyc6IGlkcy5qb2luKCcsJykKICAgICAgICAgIH0pLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIC8v5Yig6Zmk5oiQ5Yqf5ZCOLOWbnuiwg+abtOaWsOaVsOaNrgogICAgICAgICAgICAgIHRoaXMuZ2V0Tm90aWNlSW5mbygpOwogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ1RpcHMnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcC5tZXNzYWdlLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgdGl0bGU6ICdUaXBzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzlpLHotKUnLAogICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOaYvuekuuWPkeW4g+aWsOmXu+WvueivneahhgogICAgc2hvd1B1Ymxpc2hOb3RpY2VEaWFsb2coKSB7CiAgICAgIHRoaXMucHVibGlzaFRhYmxlVmlzaWJsZSA9IHRydWU7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmNyZWF0ZVB1Ymxpc2hXYW5nRWRpdG9yKCk7CiAgICAgIH0sIDIwMCk7CiAgICB9LAogICAgLy8g5Y+R5biD5YWs5ZGK55qE6KGo5Y2V5L+h5oGv6YeN572uCiAgICByZXNldFB1Ymxpc2hGb3JtKCkgewogICAgICAvL+a4heepuuihqOagvOaVsOaNrgogICAgICB0aGlzLiRyZWZzWydwdWJsaXNoRm9ybSddLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgLy8g5Yib5bu65paw5aKe5paw6Ze755qE5a+M5paH5pys57yW6L6R5ZmoCiAgICBjcmVhdGVQdWJsaXNoV2FuZ0VkaXRvcigpIHsKICAgICAgaWYgKCF0aGlzLnB1Ymxpc2hFZGl0b3IpIHsKICAgICAgICB0aGlzLnB1Ymxpc2hFZGl0b3IgPSBuZXcgRSgnI3B1Ymxpc2hFZGl0b3InKTsKICAgICAgICB0aGlzLnB1Ymxpc2hFZGl0b3IuY3JlYXRlKCk7CiAgICAgIH0KICAgICAgLy8g6K6+572u57yW6L6R5Yy65Z+f6auY5bqm5Li6IDMwMHB4CiAgICAgIHRoaXMucHVibGlzaEVkaXRvci5jb25maWcuaGVpZ2h0ID0gMzAwOwogICAgICB0aGlzLnB1Ymxpc2hFZGl0b3IuY29uZmlnLm9uY2hhbmdlID0gaHRtbCA9PiB7CiAgICAgICAgdGhpcy5wdWJsaXNoRm9ybS5jb250ZW50ID0gaHRtbDsKICAgICAgfTsKICAgICAgdGhpcy5wdWJsaXNoRWRpdG9yLnR4dC5odG1sKHRoaXMucHVibGlzaEZvcm0uY29udGVudCk7CiAgICB9LAogICAgLy8g5Yib5bu65pu05paw5paw6Ze755qE5a+M5paH5pys57yW6L6R5ZmoCiAgICBjcmVhdGVVcGRhdGVXYW5nRWRpdG9yKCkgewogICAgICBpZiAoIXRoaXMudXBkYXRlRWRpdG9yKSB7CiAgICAgICAgdGhpcy51cGRhdGVFZGl0b3IgPSBuZXcgRSgnI3VwZGF0ZUVkaXRvcicpOwogICAgICAgIHRoaXMudXBkYXRlRWRpdG9yLmNyZWF0ZSgpOwogICAgICB9CiAgICAgIC8vIOiuvue9rue8lui+keWMuuWfn+mrmOW6puS4uiAzMDBweAogICAgICB0aGlzLnVwZGF0ZUVkaXRvci5jb25maWcuaGVpZ2h0ID0gMzAwOwogICAgICB0aGlzLnVwZGF0ZUVkaXRvci5jb25maWcub25jaGFuZ2UgPSBodG1sID0+IHsKICAgICAgICB0aGlzLnVwZGF0ZUZvcm0uY29udGVudCA9IGh0bWw7CiAgICAgIH07CiAgICAgIHRoaXMudXBkYXRlRWRpdG9yLnR4dC5odG1sKHRoaXMudXBkYXRlRm9ybS5jb250ZW50KTsKICAgIH0sCiAgICAvLyDlj5HluIPlhazlkYoKICAgIHB1Ymxpc2hOb3RpY2UoKSB7CiAgICAgIHV0aWxzLnZhbGlkRm9ybUFuZEludm9rZSh0aGlzLiRyZWZzWydwdWJsaXNoRm9ybSddLCAoKSA9PiB7CiAgICAgICAgbm90aWNlLnB1Ymxpc2hOb3RpY2UodGhpcy5wdWJsaXNoRm9ybSkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLmdldE5vdGljZUluZm8oKTsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ1RpcHMnLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3AubWVzc2FnZSwKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcC5tZXNzYWdlLAogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnB1Ymxpc2hUYWJsZVZpc2libGUgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSwgJ+ivt+ajgOafpeaCqOaJgOWhq+WGmeeahOS/oeaBr+aYr+WQpuacieivrycpOwogICAgfSwKICAgIC8vIOaYvuekuuabtOaWsOWFrOWRiueahOWvueivneahhgogICAgc2hvd1VwZGF0ZU5vdGljZURpYWxvZyhyb3cpIHsKICAgICAgdGhpcy51cGRhdGVGb3JtLmNvbnRlbnQgPSByb3cuY29udGVudDsKICAgICAgdGhpcy51cGRhdGVGb3JtLm5pZCA9IHJvdy5uaWQ7CiAgICAgIHRoaXMudXBkYXRlRm9ybS5zdGF0dXMgPSByb3cuc3RhdHVzICsgJyc7CiAgICAgIHRoaXMuY3VycmVudFVwZGF0ZU5vdGljZVN0YXR1cyA9IHJvdy5zdGF0dXMgKyAnJzsKICAgICAgdGhpcy51cGRhdGVUYWJsZVZpc2libGUgPSB0cnVlOwogICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5jcmVhdGVVcGRhdGVXYW5nRWRpdG9yKCk7CiAgICAgIH0sIDIwMCk7CiAgICB9LAogICAgLy8g5pu05paw5YWs5ZGKCiAgICB1cGRhdGVOb3RpY2UoKSB7CiAgICAgIHV0aWxzLnZhbGlkRm9ybUFuZEludm9rZSh0aGlzLiRyZWZzWyd1cGRhdGVGb3JtJ10sICgpID0+IHsKICAgICAgICBub3RpY2UudXBkYXRlTm90aWNlKHRoaXMudXBkYXRlRm9ybSkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLmdldE5vdGljZUluZm8oKTsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ1RpcHMnLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3AubWVzc2FnZSwKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcC5tZXNzYWdlLAogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVwZGF0ZVRhYmxlVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9LCAn6K+35qOA5p+l5oKo5omA5aGr5YaZ55qE5L+h5oGv5piv5ZCm5pyJ6K+vJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["E","notice","utils","name","data","queryInfo","optionInfo","selected","noticeInfo","loading","total","selectedInTable","publishTableVisible","publishForm","content","status","publishFormRules","required","message","trigger","publishEditor","updateEditor","updateTableVisible","updateForm","nid","updateFormRules","currentUpdateNoticeStatus","created","getNoticeInfo","methods","getAllNotice","then","resp","code","$notify","title","type","duration","handleSelectionChange","val","handleSizeChange","pageSize","handleCurrentChange","pageNo","selectChange","ids","map","item","push","length","$message","error","deleteNotice","join","showPublishNoticeDialog","window","setTimeout","createPublishWangEditor","resetPublishForm","$refs","resetFields","create","config","height","onchange","html","txt","createUpdateWangEditor","publishNotice","validFormAndInvoke","showUpdateNoticeDialog","row","updateNotice"],"sources":["src/views/admin/NoticeManage.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n\r\n    <el-header>\r\n      <el-input v-model=\"queryInfo.noticeContent\" @blur=\"getNoticeInfo\" placeholder=\"搜索公告\"\r\n                prefix-icon=\"el-icon-search\"></el-input>\r\n\r\n      <el-button type=\"primary\" style=\"margin-left: 5px\" icon=\"el-icon-plus\" @click=\"showPublishNoticeDialog\">发布新公告\r\n      </el-button>\r\n    </el-header>\r\n\r\n    <el-main>\r\n      <!--操作的下拉框-->\r\n      <el-select @change=\"selectChange\" clearable v-if=\"selectedInTable.length !== 0\" v-model=\"selected\"\r\n                 :placeholder=\"'已选择' + selectedInTable.length + '项'\" style=\"margin-bottom: 25px;\">\r\n\r\n        <el-option v-for=\"(item,index) in optionInfo\" :key=\"index\" :value=\"item.desc\">\r\n          <span style=\"float: left\">{{ item.label }}</span>\r\n          <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.desc }}</span>\r\n        </el-option>\r\n\r\n      </el-select>\r\n\r\n      <el-table\r\n        ref=\"multipleTable\"\r\n        highlight-current-row\r\n        v-loading=\"loading\"\r\n        :border=\"true\"\r\n        :data=\"noticeInfo\"\r\n        tooltip-effect=\"dark\"\r\n        style=\"width: 100%\"\r\n        @selection-change=\"handleSelectionChange\">\r\n\r\n        <el-table-column align=\"center\"\r\n                         type=\"selection\"\r\n                         width=\"55\">\r\n        </el-table-column>\r\n\r\n\r\n        <el-table-column label=\"公告内容\" width=\"600px;\">\r\n          <template slot-scope=\"scope\">\r\n            <p v-html=\"scope.row.content\"></p>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\"\r\n                         prop=\"createTime\"\r\n                         label=\"发布时间\">\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\"\r\n                         label=\"更新时间\">\r\n\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.updateTime === null ? '暂无更新' : scope.row.updateTime }}\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\"\r\n                         label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <p v-if=\"scope.row.status === 1\" style=\"color: limegreen\">当前系统公告</p>\r\n            <p v-if=\"scope.row.status === 0\" style=\"color: #ffd550\">历史公告</p>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\"\r\n                         label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"warning\" @click=\"showUpdateNoticeDialog(scope.row)\">更新公告</el-button>\r\n          </template>\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n\r\n      <!--分页-->\r\n      <el-pagination style=\"margin-top: 25px\"\r\n                     @size-change=\"handleSizeChange\"\r\n                     @current-change=\"handleCurrentChange\"\r\n                     :current-page=\"queryInfo.pageNo\"\r\n                     :page-sizes=\"[10, 20, 30, 50]\"\r\n                     :page-size=\"queryInfo.pageSize\"\r\n                     layout=\"total, sizes, prev, pager, next, jumper\"\r\n                     :total=\"total\">\r\n      </el-pagination>\r\n\r\n    </el-main>\r\n\r\n    <el-dialog title=\"发布公告\" :visible.sync=\"publishTableVisible\" width=\"70%\"\r\n               @close=\"resetPublishForm\"\r\n               center>\r\n\r\n      <el-form :model=\"publishForm\" :rules=\"publishFormRules\" ref=\"publishForm\">\r\n\r\n        <el-form-item label=\"公告内容\" label-width=\"120px\" prop=\"content\">\r\n          <div id=\"publishEditor\"></div>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"当前最新公告?\" label-width=\"120px\" prop=\"status\">\r\n          <el-select v-model=\"publishForm.status\" placeholder=\"是否设置为当前最新公告\">\r\n            <el-option label=\"是\" value=\"1\"></el-option>\r\n            <el-option label=\"否\" value=\"0\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"publishTableVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"publishNotice\">发 布</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"更新公告\" :visible.sync=\"updateTableVisible\" width=\"70%\"\r\n               @close=\"$refs['updateForm'].resetFields()\"\r\n               center>\r\n\r\n      <el-form :model=\"updateForm\" :rules=\"updateFormRules\" ref=\"updateForm\">\r\n\r\n        <el-form-item label=\"公告内容\" label-width=\"120px\" prop=\"content\">\r\n          <div id=\"updateEditor\"></div>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"当前最新公告?\" label-width=\"120px\" prop=\"status\">\r\n          <el-select v-model=\"updateForm.status\" :disabled=\"currentUpdateNoticeStatus === '1'\"\r\n                     placeholder=\"是否设置为当前最新公告\">\r\n            <el-option label=\"是\" value=\"1\"></el-option>\r\n            <el-option label=\"否\" value=\"0\"></el-option>\r\n          </el-select>\r\n          <span v-show=\"currentUpdateNoticeStatus === '1'\" style=\"color: red\">\r\n            请将其他公告设置为当前使用公告后再操作正在使用的公告\r\n          </span>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"updateTableVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateNotice\">更 新</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </el-container>\r\n\r\n</template>\r\n\r\n<script>\r\n// 导入富文本编辑器\r\nimport E from 'wangeditor'\r\nimport notice from '@/api/notice'\r\nimport utils from '@/utils/utils'\r\n\r\nexport default {\r\n  name: 'NoticeManage',\r\n  data() {\r\n    return {\r\n      //查询公告的参数\r\n      queryInfo: {\r\n        'noticeContent': '',\r\n        'pageNo': 1,\r\n        'pageSize': 10\r\n      },\r\n      //下拉选择框的数据\r\n      optionInfo: [\r\n        {\r\n          'label': '删除',\r\n          'desc': 'delete'\r\n        }\r\n      ],\r\n      //下拉框所选择的数据\r\n      selected: '',\r\n      // 所有公告信息\r\n      noticeInfo: [],\r\n      // 表格数据预加载\r\n      loading: true,\r\n      // 公告总数\r\n      total: 0,\r\n      // 被选中的表格行\r\n      selectedInTable: [],\r\n      // 发布公告对话框\r\n      publishTableVisible: false,\r\n      // 发布的表单\r\n      publishForm: {\r\n        content: '',\r\n        status: '1'\r\n      },\r\n      publishFormRules: {\r\n        content: [\r\n          {\r\n            required: true,\r\n            message: '请输入公告内容',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      // 发布公告的富文本编辑器\r\n      publishEditor: null,\r\n      // 更新公告的富文本编辑器\r\n      updateEditor: null,\r\n      // 更新公告的对话框是否展示\r\n      updateTableVisible: false,\r\n      // 更新的表单\r\n      updateForm: {\r\n        nid: '',\r\n        content: '',\r\n        status: ''\r\n      },\r\n      updateFormRules: {\r\n        content: [\r\n          {\r\n            required: true,\r\n            message: '请输入公告内容',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      // 当前更新的公告的信息\r\n      currentUpdateNoticeStatus: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.getNoticeInfo()\r\n  },\r\n  methods: { //获取用户信息\r\n    getNoticeInfo() {\r\n      notice.getAllNotice(this.queryInfo).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.noticeInfo = resp.data.data\r\n          this.total = resp.data.total\r\n          this.loading = false\r\n        } else {\r\n          this.$notify({\r\n            title: 'Tips',\r\n            message: '获取信息失败',\r\n            type: 'error',\r\n            duration: 2000\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //表格某一行被选中\r\n    handleSelectionChange(val) {\r\n      this.selectedInTable = val\r\n    },\r\n    //分页插件的大小改变\r\n    handleSizeChange(val) {\r\n      this.queryInfo.pageSize = val\r\n      this.getNoticeInfo()\r\n    },\r\n    //分页插件的页数\r\n    handleCurrentChange(val) {\r\n      this.queryInfo.pageNo = val\r\n      this.getNoticeInfo()\r\n    },\r\n    //功能下拉框被选择\r\n    selectChange(val) {\r\n      //清空上一次的操作\r\n      this.selected = ''\r\n      //表格中所选中的公告的id\r\n      let ids = []\r\n      this.selectedInTable.map(item => {\r\n        if (item.status !== 1) {// **防止删除当前使用公告\r\n          ids.push(item.nid)\r\n        }\r\n      })\r\n      if (val === 'delete') {//删除\r\n        if (ids.length === 0) {\r\n          this.$message.error('不允许删除当前使用公告')\r\n        } else {\r\n          notice.deleteNotice({'ids': ids.join(',')}).then((resp) => {\r\n            if (resp.code === 200) {\r\n              //删除成功后,回调更新数据\r\n              this.getNoticeInfo()\r\n              this.$notify({\r\n                title: 'Tips',\r\n                message: resp.message,\r\n                type: 'success',\r\n                duration: 2000\r\n              })\r\n            } else {\r\n              this.$notify({\r\n                title: 'Tips',\r\n                message: '操作失败',\r\n                type: 'error',\r\n                duration: 2000\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n    },\r\n    // 显示发布新闻对话框\r\n    showPublishNoticeDialog() {\r\n      this.publishTableVisible = true\r\n      window.setTimeout(() => {\r\n        this.createPublishWangEditor()\r\n      }, 200)\r\n    },\r\n    // 发布公告的表单信息重置\r\n    resetPublishForm() {\r\n      //清空表格数据\r\n      this.$refs['publishForm'].resetFields()\r\n    },\r\n    // 创建新增新闻的富文本编辑器\r\n    createPublishWangEditor() {\r\n      if (!this.publishEditor) {\r\n        this.publishEditor = new E('#publishEditor')\r\n        this.publishEditor.create()\r\n      }\r\n      // 设置编辑区域高度为 300px\r\n      this.publishEditor.config.height = 300\r\n      this.publishEditor.config.onchange = (html) => {\r\n        this.publishForm.content = html\r\n      }\r\n      this.publishEditor.txt.html(this.publishForm.content)\r\n    },\r\n    // 创建更新新闻的富文本编辑器\r\n    createUpdateWangEditor() {\r\n      if (!this.updateEditor) {\r\n        this.updateEditor = new E('#updateEditor')\r\n        this.updateEditor.create()\r\n      }\r\n      // 设置编辑区域高度为 300px\r\n      this.updateEditor.config.height = 300\r\n      this.updateEditor.config.onchange = (html) => {\r\n        this.updateForm.content = html\r\n      }\r\n      this.updateEditor.txt.html(this.updateForm.content)\r\n    },\r\n    // 发布公告\r\n    publishNotice() {\r\n      utils.validFormAndInvoke(this.$refs['publishForm'], () => {\r\n        notice.publishNotice(this.publishForm).then((resp) => {\r\n          if (resp.code === 200) {\r\n            this.getNoticeInfo()\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: resp.message,\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n          } else {\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: resp.message,\r\n              type: 'error',\r\n              duration: 2000\r\n            })\r\n          }\r\n          this.publishTableVisible = false\r\n        })\r\n      }, '请检查您所填写的信息是否有误')\r\n    },\r\n    // 显示更新公告的对话框\r\n    showUpdateNoticeDialog(row) {\r\n      this.updateForm.content = row.content\r\n      this.updateForm.nid = row.nid\r\n      this.updateForm.status = row.status + ''\r\n      this.currentUpdateNoticeStatus = row.status + ''\r\n      this.updateTableVisible = true\r\n      window.setTimeout(() => {\r\n        this.createUpdateWangEditor()\r\n      }, 200)\r\n    },\r\n    // 更新公告\r\n    updateNotice() {\r\n      utils.validFormAndInvoke(this.$refs['updateForm'], () => {\r\n        notice.updateNotice(this.updateForm).then((resp) => {\r\n          if (resp.code === 200) {\r\n            this.getNoticeInfo()\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: resp.message,\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n          } else {\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: resp.message,\r\n              type: 'error',\r\n              duration: 2000\r\n            })\r\n          }\r\n          this.updateTableVisible = false\r\n        })\r\n      }, '请检查您所填写的信息是否有误')\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/css/admin/NoticeManage\";\r\n</style>\r\n"],"mappings":"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"}]}