{"remainingRequest":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\termination project\\front\\src\\views\\student\\ExamPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\termination project\\front\\src\\views\\student\\ExamPage.vue","mtime":1682621396224},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoNCmltcG9ydCBleGFtIGZyb20gJ0AvYXBpL2V4YW0nDQppbXBvcnQgcXVlc3Rpb24gZnJvbSAnQC9hcGkvcXVlc3Rpb24nDQppbXBvcnQgb3NzVXRpbHMgZnJvbSAnQC9hcGkvb3NzVXRpbHMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0V4YW1QYWdlJywNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8v5b2T5YmN6ICD6K+V55qE5L+h5oGvDQogICAgICBleGFtSW5mbzoge30sDQogICAgICAvL+W9k+WJjeeahOiAg+ivlemimOebrg0KICAgICAgcXVlc3Rpb25JbmZvOiBbDQogICAgICAgIHsNCiAgICAgICAgICBxdWVzdGlvblR5cGU6ICcnDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICAvL+W9k+WJjemimOebrueahOe0ouW8leWAvA0KICAgICAgY3VySW5kZXg6IDAsDQogICAgICAvL+aOp+WItuWkp+WbvueahOWvueivneahhg0KICAgICAgYmlnSW1nRGlhbG9nOiBmYWxzZSwNCiAgICAgIC8v5b2T5YmN6KaB5bGV56S655qE5aSn5Zu+55qEdXJsDQogICAgICBiaWdJbWdVcmw6ICcnLA0KICAgICAgLy/nlKjmiLfpgInmi6nnmoTnrZTmoYgNCiAgICAgIHVzZXJBbnN3ZXI6IFtdLA0KICAgICAgLy/pobXpnaLmlbDmja7liqDovb0NCiAgICAgIGxvYWRpbmc6IHt9LA0KICAgICAgLy/pobXpnaLnu5jliLbmmK/lkKblvIDlp4sNCiAgICAgIHNob3c6IGZhbHNlLA0KICAgICAgLy/nrZTmoYjnmoTpgInpobnlkI1hYmNk5pWw5o2uDQogICAgICBvcHRpb25OYW1lOiBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddLA0KICAgICAgLy/ogIPor5XmgLvml7bplb8NCiAgICAgIGR1cmF0aW9uOiAwLA0KICAgICAgLy/mkYTlg4/lpLTlr7nosaENCiAgICAgIG1lZGlhU3RyZWFtVHJhY2s6IG51bGwsDQogICAgICAvL+ivmuS/oeeFp+eJh+eahHVybA0KICAgICAgdGFrZVBob3RvVXJsOiBbXSwNCiAgICAgIC8v5pGE5YOP5aS05piv5ZCm5byA5ZCvDQogICAgICBjYW1lcmFPbjogZmFsc2UsDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmdldEV4YW1JbmZvKCkNCiAgICAvL+mhtemdouaVsOaNruWKoOi9veeahOetieW+heeKtuaAgeagjw0KICAgIHRoaXMubG9hZGluZyA9IHRoaXMuJExvYWRpbmcuc2VydmljZSh7DQogICAgICBib2R5OiB0cnVlLA0KICAgICAgbG9jazogdHJ1ZSwNCiAgICAgIHRleHQ6ICfmlbDmja7mi7zlkb3liqDovb3kuK0sKCrilbnilr3ilbkqKScsDQogICAgICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywNCiAgICB9KQ0KICAgIA0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICAvL+WFs+mXrea1j+iniOWZqOeql+WPo+eahOaXtuWAmeenu+mZpCBsb2NhbHN0b3JhZ2XnmoTml7bplb8NCiAgICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCAvL+WPluW+l+a1j+iniOWZqOeahHVzZXJBZ2VudOWtl+espuS4sg0KICAgIHZhciBpc09wZXJhID0gdXNlckFnZW50LmluZGV4T2YoJ09wZXJhJykgPiAtMSAvL+WIpOaWreaYr+WQpk9wZXJh5rWP6KeI5ZmoDQogICAgdmFyIGlzSUUgPSB1c2VyQWdlbnQuaW5kZXhPZignY29tcGF0aWJsZScpID4gLTEgJiYgdXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSA+IC0xICYmICFpc09wZXJhIC8v5Yik5pat5piv5ZCmSUXmtY/op4jlmagNCiAgICB2YXIgaXNJRTExID0gdXNlckFnZW50LmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xIC8v5Yik5pat5piv5ZCm5pivSUUxMea1j+iniOWZqA0KICAgIHZhciBpc0VkZ2UgPSB1c2VyQWdlbnQuaW5kZXhPZignRWRnZScpID4gLTEgJiYgIWlzSUUgLy/liKTmlq3mmK/lkKZJReeahEVkZ2XmtY/op4jlmagNCiAgICBpZiAoIWlzSUUgJiYgIWlzRWRnZSAmJiAhaXNJRTExKSB7Ly/lhbzlrrljaHJvbWXlkoxmaXJlZm94DQogICAgICB2YXIgX2JlZm9yZVVubG9hZF90aW1lID0gMCwgX2dhcF90aW1lID0gMA0KICAgICAgdmFyIGlzX2ZpcmVGb3ggPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IC0xLy/mmK/lkKbmmK/ngavni5DmtY/op4jlmagNCiAgICAgIHdpbmRvdy5vbnVubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgX2dhcF90aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBfYmVmb3JlVW5sb2FkX3RpbWUNCiAgICAgICAgaWYgKF9nYXBfdGltZSA8PSA1KSB7DQogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2V4YW1EdXJhdGlvbicgKyB0aGlzLmV4YW1JbmZvLmV4YW1JZCkNCiAgICAgICAgfSBlbHNlIHsvL+iwt+atjOa1j+iniOWZqOWIt+aWsA0KICAgICAgICB9DQogICAgICB9DQogICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIF9iZWZvcmVVbmxvYWRfdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpDQogICAgICAgIGlmIChpc19maXJlRm94KSB7Ly/ngavni5DlhbPpl63miafooYwNCg0KICAgICAgICB9IGVsc2Ugey8v54Gr54uQ5rWP6KeI5Zmo5Yi35pawDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+afpeivouW9k+WJjeiAg+ivleeahOS/oeaBrw0KICAgIGdldEV4YW1JbmZvICgpIHsNCiAgICAgIGV4YW0uZ2V0RXhhbUluZm9CeUlkKHRoaXMuJHJvdXRlLnBhcmFtcykudGhlbigocmVzcCkgPT4gew0KICAgICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmV4YW1JbmZvID0gcmVzcC5kYXRhDQogICAgICAgICAgLy/orr7nva7lrprml7Yo56eSKQ0KICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhhbUR1cmF0aW9uJyArIHRoaXMuZXhhbUluZm8uZXhhbUlkKSA9PT0gJzAnKSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZXhhbUR1cmF0aW9uJyArIHRoaXMuZXhhbUluZm8uZXhhbUlkKQ0KICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhhbUR1cmF0aW9uJyArIHRoaXMuZXhhbUluZm8uZXhhbUlkKSB8fCByZXNwLmRhdGEuZXhhbUR1cmF0aW9uICogNjANCiAgICAgICAgICAvL+iAg+ivleWJqeS9meaXtumXtOWumuaXtuWZqA0KICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb24gPiAwKSB0aGlzLmR1cmF0aW9uLS0NCiAgICAgICAgICB9LCAxMDAwKQ0KICAgICAgICAgIHRoaXMuZ2V0UXVlc3Rpb25JbmZvKHJlc3AuZGF0YS5xdWVzdGlvbklkcy5zcGxpdCgnLCcpKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/mn6Xor6LogIPor5XnmoTpopjnm67kv6Hmga8NCiAgICBhc3luYyBnZXRRdWVzdGlvbkluZm8gKGlkcykgew0KICAgICAgYXdhaXQgcXVlc3Rpb24uZ2V0UXVlc3Rpb25CeUlkcyh7ICdpZHMnOiBpZHMuam9pbignLCcpIH0pLnRoZW4ocmVzcCA9PiB7DQogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvID0gcmVzcD8uZGF0YT8uZGF0YSB8fCBbXQ0KICAgICAgICAgIC8v6YeN572u6Zeu6aKY55qE6aG65bqPIOWNlemAiSDlpJrpgIkg5Yik5patIOeugOetlA0KICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvID0gdGhpcy5xdWVzdGlvbkluZm8uc29ydChmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgICAgcmV0dXJuIGEucXVlc3Rpb25UeXBlIC0gYi5xdWVzdGlvblR5cGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCkNCiAgICAgIHRoaXMuc2hvdyA9IHRydWUNCiAgICB9LA0KICAgIC8v54K55Ye75bGV56S66auY5riF5aSn5Zu+DQogICAgc2hvd0JpZ0ltZyAodXJsKSB7DQogICAgICB0aGlzLmJpZ0ltZ1VybCA9IHVybA0KICAgICAgdGhpcy5iaWdJbWdEaWFsb2cgPSB0cnVlDQogICAgfSwNCiAgICAvL+ajgOmqjOWNlemAiemimOeahOeUqOaIt+mAieaLqeeahOetlOahiA0KICAgIGNoZWNrU2luZ2xlQW5zd2VyIChpbmRleCkgew0KICAgICAgdGhpcy4kc2V0KHRoaXMudXNlckFuc3dlciwgdGhpcy5jdXJJbmRleCwgaW5kZXgpDQogICAgfSwNCiAgICAvL+WkmumAiemimOeUqOaIt+eahOetlOahiOmAieS4rQ0KICAgIHNlbGVjdGVkTXVsdGlwbGVBbnN3ZXIgKGluZGV4KSB7DQogICAgICBpZiAodGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdID09PSB1bmRlZmluZWQpIHsvL+W9k+WJjeaYr+WkmumAieeahOesrOS4gOS4quetlOahiA0KICAgICAgICB0aGlzLiRzZXQodGhpcy51c2VyQW5zd2VyLCB0aGlzLmN1ckluZGV4LCBpbmRleCkNCiAgICAgIH0gZWxzZSBpZiAoU3RyaW5nKHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSkuc3BsaXQoJywnKS5pbmNsdWRlcyhpbmRleCArICcnKSkgey8v5Y+W5raI6YCJ5LitDQogICAgICAgIGxldCBuZXdBcnIgPSBbXQ0KICAgICAgICBTdHJpbmcodGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdKS5zcGxpdCgnLCcpLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0gIT09ICcnICsgaW5kZXgpIG5ld0Fyci5wdXNoKGl0ZW0pDQogICAgICAgIH0pDQogICAgICAgIGlmIChuZXdBcnIubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudXNlckFuc3dlciwgdGhpcy5jdXJJbmRleCwgdW5kZWZpbmVkKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnVzZXJBbnN3ZXIsIHRoaXMuY3VySW5kZXgsIG5ld0Fyci5qb2luKCcsJykpDQogICAgICAgICAgLy/nrZTmoYjmoLzlvI/ljJbpobrluo9EQkFDIC0+IEFCQ0QNCiAgICAgICAgICB0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0gPSBTdHJpbmcodGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdKS5zcGxpdCgnLCcpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICAgIHJldHVybiBhIC0gYg0KICAgICAgICAgIH0pLmpvaW4oJywnKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKCEoKHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSArICcnKS5zcGxpdCgnLCcpLmluY2x1ZGVzKGluZGV4ICsgJycpKSkgey8v56ysbuS4quetlOahiA0KICAgICAgICB0aGlzLiRzZXQodGhpcy51c2VyQW5zd2VyLCB0aGlzLmN1ckluZGV4LCB0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0gKz0gJywnICsgaW5kZXgpDQogICAgICAgIC8v562U5qGI5qC85byP5YyW6aG65bqPREJBQyAtPiBBQkNEDQogICAgICAgIHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSA9IFN0cmluZyh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0pLnNwbGl0KCcsJykuc29ydChmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgIHJldHVybiBhIC0gYg0KICAgICAgICB9KS5qb2luKCcsJykNCiAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIC8v5LiK5Lyg55So5oi36ICD6K+V5L+h5oGv6L+b5YWl5ZCO5Y+wDQogICAgYXN5bmMgdXBsb2FkRXhhbVRvQWRtaW4gKCkgew0KICAgICAgaWYgKHRoaXMuY2FtZXJhT24pIGF3YWl0IHRoaXMudGFrZVBob3RvKCkvL+e7k+adn+eahOaXtuWAmeaLjeeFp+S4iuS8oOS4gOW8oA0KICAgICAgLy8g5q2j5YiZDQogICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnLScsICdnJykNCiAgICAgIC8vIOWOu+aOieeUqOaIt+i+k+WFpeeahOmdnuazleWIhuWJsuespuWPtygtKSzkv53or4HlkI7nq6/mjqXlj5fmlbDmja7lpITnkIbkuI3miqXplJkNCiAgICAgIHRoaXMudXNlckFuc3dlci5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAodGhpcy5xdWVzdGlvbkluZm9baW5kZXhdLnF1ZXN0aW9uVHlwZSA9PT0gNCkgey8v566A562U6aKY562U5qGI5aSE55CGDQogICAgICAgICAgdGhpcy51c2VyQW5zd2VyW2luZGV4XSA9IGl0ZW0ucmVwbGFjZShyZWcsICcgJykNCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgICAgLy8g5qCH6K6w6aKY55uu5piv5ZCm5YWo6YOo5YGa5a6MDQogICAgICBsZXQgZmxhZyA9IHRydWUNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy51c2VyQW5zd2VyLmxlbmd0aDsgaSsrKSB7Ly8g5qOA5rWL55So5oi35piv5ZCm6aKY55uu5YWo6YOo5YGa5a6MDQogICAgICAgIGlmICh0aGlzLnVzZXJBbnN3ZXJbaV0gPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIGZsYWcgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyDlpoLmnpznlKjmiLfmiYDmnInnrZTmoYjnmoTmlbDnu4Tplb/luqblsI/kuo7popjnm67plb/luqYs6L+Z5Liq5pe25YCZ5Lmf6KaB5bCG5qCH5b+X5L2N572u5Li6ZmFsc2UNCiAgICAgIGlmICh0aGlzLnVzZXJBbnN3ZXIubGVuZ3RoIDwgdGhpcy5xdWVzdGlvbkluZm8ubGVuZ3RoKSB7DQogICAgICAgIGZsYWcgPSBmYWxzZQ0KICAgICAgfQ0KICAgICAgLy/popjnm67mnKrlgZrlrowNCiAgICAgIGlmICghZmxhZykgew0KICAgICAgICAvLyBpZiAodGhpcy51c2VyQW5zd2VyLnNvbWUoKGl0ZW0pID0+IGl0ZW0gPT09IHVuZGVmaW5lZCkpIHsNCiAgICAgICAgdGhpcy4kY29uZmlybSgnc29tZSBxdWVzdGlvbnMgYXJlIHN0aWxsIG5vdCBhbnN3ZXJlZCwgc3RpbGwgc3VibWl0PyBvKOKVpe+5j+KVpSlvID8nLCAnVGlwcycsIHsNCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ2NvbmZpcm0nLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdjYW5jZWwnLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICBsZXQgZGF0YSA9IHt9DQogICAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IFtdDQogICAgICAgICAgZGF0YS51c2VyQW5zd2VycyA9IHRoaXMudXNlckFuc3dlci5qb2luKCctJykNCiAgICAgICAgICB0aGlzLnF1ZXN0aW9uSW5mby5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgZGF0YS5xdWVzdGlvbklkcy5wdXNoKGl0ZW0ucXVlc3Rpb25JZCkNCiAgICAgICAgICAgIC8v5b2T5YmN5pWw5o2u5LiN5a6M5pW0LOeUqOaIt+WbnuetlOS4jeWujOaVtCjmiJHku6zoh6rliqjooaXlhYXnqbrnrZTmoYgs6Ziy5q2i5Lia5Yqh5Ye66ZSZKQ0KICAgICAgICAgICAgaWYgKGluZGV4ID4gKHRoaXMudXNlckFuc3dlci5sZW5ndGggLSAxKSkgew0KICAgICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzICs9ICctICcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC8v5aaC5p6c5omA5pyJ6aKY55uu5YWo6YOo5pyq562UDQogICAgICAgICAgaWYgKHRoaXMudXNlckFuc3dlci5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMgKz0gJyAtJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMuc3BsaXQoMCwgZGF0YS51c2VyQW5zd2Vycy5sZW5ndGggLSAxKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBkYXRhLmV4YW1JZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5leGFtSWQpDQogICAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IGRhdGEucXVlc3Rpb25JZHMuam9pbignLCcpDQogICAgICAgICAgZGF0YS5jcmVkaXRJbWdVcmwgPSB0aGlzLnRha2VQaG90b1VybC5qb2luKCcsJykNCiAgICAgICAgICBleGFtLmFkZEV4YW1SZWNvcmQoZGF0YSkudGhlbigocmVzcCkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICAgICAgdGl0bGU6ICdUaXBzJywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZW5kIG9mIGV4YW0gKl7ilr1eKicsDQogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZXhhbVJlc3VsdC8nICsgcmVzcC5kYXRhKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgdGl0bGU6ICdUaXBzJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICdrZWVwIHRyeWluZyEgKl7ilr1eKicsDQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugey8v5b2T5YmN6aKY55uu5YGa5a6M5LqGDQogICAgICAgIA0KICAgICAgICBsZXQgZGF0YSA9IHt9DQogICAgICAgIGRhdGEucXVlc3Rpb25JZHMgPSBbXQ0KICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzID0gdGhpcy51c2VyQW5zd2VyLmpvaW4oJy0nKQ0KICAgICAgICBkYXRhLmV4YW1JZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5leGFtSWQpDQogICAgICAgIGRhdGEuY3JlZGl0SW1nVXJsID0gdGhpcy50YWtlUGhvdG9Vcmwuam9pbignLCcpDQogICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgZGF0YS5xdWVzdGlvbklkcy5wdXNoKGl0ZW0ucXVlc3Rpb25JZCkNCiAgICAgICAgfSkNCiAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IGRhdGEucXVlc3Rpb25JZHMuam9pbignLCcpDQogICAgICAgIGV4YW0uYWRkRXhhbVJlY29yZChkYXRhKS50aGVuKChyZXNwKSA9PiB7DQogICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgICB0aXRsZTogJ1RpcHMnLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAnZW5kIG9mIGV4YW0gKl7ilr1eKicsDQogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2V4YW1SZXN1bHQvJyArIHJlc3AuZGF0YSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIC8v55uR5o6n6ICD6K+V55qE5Ymp5L2Z5pe26Ze0DQogICAgYXN5bmMgZHVyYXRpb24gKG5ld1ZhbCkgew0KICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V4YW1EdXJhdGlvbicgKyB0aGlzLmV4YW1JbmZvLmV4YW1JZCwgbmV3VmFsKQ0KICAgICAgLy/mkYTlg4/lpLTmlbDmja4NCiAgICAgIGxldCBjb25zdHJhaW50cyA9IHsNCiAgICAgICAgdmlkZW86IHsNCiAgICAgICAgICB3aWR0aDogMjAwLA0KICAgICAgICAgIGhlaWdodDogMjAwDQogICAgICAgIH0sDQogICAgICAgIGF1ZGlvOiBmYWxzZQ0KICAgICAgfQ0KICAgICAgLy/pgJrov4fosIPnlKjmkYTlg4/lpLTliKTmlq3nlKjmiLfmmK/lkKbkuK3pgJTlhbPpl63mkYTlg4/lpLQNCiAgICAgIGxldCBwcm9taXNlID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpDQogICAgICBwcm9taXNlLmNhdGNoKChiYWNrKSA9PiB7DQogICAgICAgIHRoaXMuY2FtZXJhT24gPSBmYWxzZQ0KICAgICAgfSkNCiAgICAgIGlmICghdGhpcy5jYW1lcmFPbikgey8v5aaC5p6c5pGE5YOP5aS05pyq5byA5ZCvLOWwseWGjeasoeiwg+eUqOW8gOWQrw0KICAgICAgICB0aGlzLmdldENhbWVyYSgpDQogICAgICB9DQogICAgICAvL+iAg+ivleaXtumXtOe7k+adn+S6huaPkOS6pOivleWNtw0KICAgICAgaWYgKG5ld1ZhbCA8IDEpIHsNCiAgICAgICAgDQogICAgICAgIGxldCBkYXRhID0ge30NCiAgICAgICAgZGF0YS5xdWVzdGlvbklkcyA9IFtdDQogICAgICAgIGRhdGEudXNlckFuc3dlcnMgPSB0aGlzLnVzZXJBbnN3ZXIuam9pbignLScpDQogICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgZGF0YS5xdWVzdGlvbklkcy5wdXNoKGl0ZW0ucXVlc3Rpb25JZCkNCiAgICAgICAgICAvL+W9k+WJjeaVsOaNruS4jeWujOaVtCznlKjmiLflm57nrZTkuI3lrozmlbQo5oiR5Lus6Ieq5Yqo6KGl5YWF56m6562U5qGILOmYsuatouS4muWKoeWHuumUmSkNCiAgICAgICAgICBpZiAoaW5kZXggPiB0aGlzLnVzZXJBbnN3ZXIubGVuZ3RoKSB7DQogICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzICs9ICcgLScNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC8v5aaC5p6c5omA5pyJ6aKY55uu5YWo6YOo5pyq562UDQogICAgICAgIGlmIChkYXRhLnVzZXJBbnN3ZXJzID09PSAnJykgew0KICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzICs9ICcgLScNCiAgICAgICAgICB9KQ0KICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMuc3BsaXQoMCwgZGF0YS51c2VyQW5zd2Vycy5sZW5ndGggLSAxKQ0KICAgICAgICB9DQogICAgICAgIGRhdGEuZXhhbUlkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucGFyYW1zLmV4YW1JZCkNCg0KICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzID0gZGF0YS5xdWVzdGlvbklkcy5qb2luKCcsJykNCiAgICAgICAgZGF0YS5jcmVkaXRJbWdVcmwgPSB0aGlzLnRha2VQaG90b1VybC5qb2luKCcsJykNCiAgICAgICAgZXhhbS5hZGRFeGFtUmVjb3JkKGRhdGEpLnRoZW4oKHJlc3ApID0+IHsNCiAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICdyZW1haW5pbmcgdGltZSBpcyB6ZXJvLCBleGFtIHN1Ym1pdHRlZCBhdXRvbWF0aWNhbGx5ICpe4pa9XionLA0KICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9leGFtUmVzdWx0LycgKyByZXNwLmRhdGEpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogIH0NCn0NCg=="},{"version":3,"sources":["ExamPage.vue"],"names":[],"mappings":";;AAkKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExamPage.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\r\n\r\n  <el-container v-if=\"show\">\r\n    <el-header style=\"margin-top: 60px\">\r\n      <el-row>\r\n        <el-col :span=\"18\" :offset=\"3\" style=\"border-bottom: 1px solid #f5f5f5\">\r\n          <span class=\"startExam\">exam began</span>\r\n          <span class=\"examTitle\">time remaining: </span>\r\n          <span style=\"color: red;font-size: 18px;\">{{ duration | timeFormat }}</span>\r\n          <el-button type=\"warning\" round\r\n                     style=\"background-color: #ffd550;float: right;color: black;font-weight: 800\"\r\n                     @click=\"uploadExamToAdmin\">submit\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-header>\r\n\r\n    <el-main>\r\n      <el-row>\r\n        <el-col :span=\"18\" :offset=\"3\">\r\n          <el-col :span=\"16\">\r\n            <el-card style=\"min-height: 500px\">\r\n              <!--题目信息-->\r\n              <div>\r\n                <i class=\"num\">{{ curIndex + 1 }}</i>\r\n                <span v-if=\"questionInfo[curIndex].questionType === 1\">【choose the best answer】</span>\r\n                <span v-else-if=\"questionInfo[curIndex].questionType === 2\">【from the answers below, choose all that applies】</span>\r\n                <span v-else-if=\"questionInfo[curIndex].questionType === 3\">【true or false】</span>\r\n                <span v-else>【short answer】</span>\r\n                <span>{{ questionInfo[curIndex].questionContent }}:</span>\r\n              </div>\r\n              <!--题目中的配图-->\r\n              <img v-for=\"url in questionInfo[curIndex].images\" :src=\"url\" title=\"click to enhance image\" alt=\"image\"\r\n                   style=\"width: 100px;height: 100px;cursor: pointer\" @click=\"showBigImg(url)\">\r\n\r\n              <!--单选 和 判断 的答案列表-->\r\n              <div style=\"margin-top: 25px\"\r\n                   v-show=\"questionInfo[curIndex].questionType === 1 || questionInfo[curIndex].questionType === 3\">\r\n                <div class=\"el-radio-group\">\r\n                  <label v-for=\"(item,index) in questionInfo[curIndex].answer\"\r\n                         @click=\"checkSingleAnswer(index)\"\r\n                         :class=\"index === userAnswer[curIndex] ? 'active' : ''\">\r\n                    <span>{{ optionName[index] + '、' + item.answer }}</span>\r\n                    <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"click to enhance image\"\r\n                         v-if=\"item.images !== null\"\r\n                         v-for=\"i2 in item.images\" :src=\"i2\" alt=\"\" @mouseover=\"showBigImg(i2)\">\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <!--多选的答案列表-->\r\n              <div style=\"margin-top: 25px\" v-show=\"questionInfo[curIndex].questionType === 2\">\r\n                <div class=\"el-radio-group\">\r\n                  <label v-for=\"(item,index) in questionInfo[curIndex].answer\"\r\n                         @click=\"selectedMultipleAnswer(index)\"\r\n                         :class=\"(userAnswer[curIndex]+'').indexOf(index+'') !== -1? 'active' : ''\">\r\n                    <span>{{ optionName[index] + '、' + item.answer }}</span>\r\n                    <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"click to enhance image\"\r\n                         v-if=\"item.images !== null\"\r\n                         v-for=\"i2 in item.images\" :src=\"i2\" alt=\"\" @mouseover=\"showBigImg(i2)\">\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <!--简答题的答案-->\r\n              <div style=\"margin-top: 25px\" v-show=\"questionInfo[curIndex].questionType === 4\">\r\n                <el-input\r\n                  type=\"textarea\"\r\n                  :rows=\"8\"\r\n                  placeholder=\"please input your answer here\"\r\n                  v-model=\"userAnswer[curIndex]\">\r\n                </el-input>\r\n              </div>\r\n\r\n              <!--上一题 下一题-->\r\n              <div style=\"margin-top: 25px\">\r\n                <el-button type=\"primary\" icon=\"el-icon-back\" :disabled=\"curIndex<1\" @click=\"curIndex--\">previous</el-button>\r\n                <el-button type=\"primary\" icon=\"el-icon-right\" :disabled=\"curIndex>=questionInfo.length-1\"\r\n                           @click=\"curIndex++\">next\r\n                </el-button>\r\n              </div>\r\n\r\n            </el-card>\r\n          </el-col>\r\n\r\n          <el-col :span=\"7\" :offset=\"1\">\r\n            <!--答题卡卡片-->\r\n            <el-card>\r\n              <div>\r\n                <p style=\"font-size: 18px;\">Overview</p>\r\n                <div style=\"margin-top: 25px\">\r\n                  <span\r\n                    style=\"background-color: rgb(238,238,238);padding: 5px 10px 5px 10px;margin-left: 15px\">not answered</span>\r\n                  <span style=\"background-color: rgb(87,148,247);color: white;\r\n                padding: 5px 10px 5px 10px;margin-left: 15px\">answered</span>\r\n                </div>\r\n              </div>\r\n\r\n              <!--单选的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">choose the best answer</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 1\"\r\n                           :class=\"questionInfo[item-1].questionType === 1 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n\r\n              <!--多选的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">choose all that applies</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 2\"\r\n                           :class=\"questionInfo[item-1].questionType === 2 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n\r\n              <!--判断的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">true or false</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 3\"\r\n                           :class=\"questionInfo[item-1].questionType === 3 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n\r\n              <!--简答的答题卡-->\r\n              <div style=\"margin-top: 25px\">\r\n                <p style=\"font-size: 18px;\">short answers</p>\r\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\r\n                           v-show=\"questionInfo[item-1].questionType === 4\"\r\n                           :class=\"questionInfo[item-1].questionType === 4 && userAnswer[item-1] !== undefined ?\r\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\r\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\r\n                </el-button>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n\r\n        </el-col>\r\n      </el-row>\r\n      <video id=\"video\" muted=\"muted\" style=\"float:right;position: fixed;top: 80%;left: 85%\" width=\"200px\"\r\n             height=\"200px\" autoplay=\"autoplay\"></video>\r\n      <canvas id=\"canvas\" hidden width=\"200px\" height=\"200px\"></canvas>\r\n    </el-main>\r\n    <!--图片回显-->\r\n    <el-dialog :visible.sync=\"bigImgDialog\" @close=\"bigImgDialog = false\">\r\n      <img style=\"width: 100%\" :src=\"bigImgUrl\">\r\n    </el-dialog>\r\n  </el-container>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport exam from '@/api/exam'\r\nimport question from '@/api/question'\r\nimport ossUtils from '@/api/ossUtils'\r\n\r\nexport default {\r\n  name: 'ExamPage',\r\n  data () {\r\n    return {\r\n      //当前考试的信息\r\n      examInfo: {},\r\n      //当前的考试题目\r\n      questionInfo: [\r\n        {\r\n          questionType: ''\r\n        }\r\n      ],\r\n      //当前题目的索引值\r\n      curIndex: 0,\r\n      //控制大图的对话框\r\n      bigImgDialog: false,\r\n      //当前要展示的大图的url\r\n      bigImgUrl: '',\r\n      //用户选择的答案\r\n      userAnswer: [],\r\n      //页面数据加载\r\n      loading: {},\r\n      //页面绘制是否开始\r\n      show: false,\r\n      //答案的选项名abcd数据\r\n      optionName: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\r\n      //考试总时长\r\n      duration: 0,\r\n      //摄像头对象\r\n      mediaStreamTrack: null,\r\n      //诚信照片的url\r\n      takePhotoUrl: [],\r\n      //摄像头是否开启\r\n      cameraOn: false,\r\n    }\r\n  },\r\n  created () {\r\n    this.getExamInfo()\r\n    //页面数据加载的等待状态栏\r\n    this.loading = this.$Loading.service({\r\n      body: true,\r\n      lock: true,\r\n      text: '数据拼命加载中,(*╹▽╹*)',\r\n      spinner: 'el-icon-loading',\r\n    })\r\n    \r\n  },\r\n  mounted () {\r\n    //关闭浏览器窗口的时候移除 localstorage的时长\r\n    var userAgent = navigator.userAgent //取得浏览器的userAgent字符串\r\n    var isOpera = userAgent.indexOf('Opera') > -1 //判断是否Opera浏览器\r\n    var isIE = userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1 && !isOpera //判断是否IE浏览器\r\n    var isIE11 = userAgent.indexOf('rv:11.0') > -1 //判断是否是IE11浏览器\r\n    var isEdge = userAgent.indexOf('Edge') > -1 && !isIE //判断是否IE的Edge浏览器\r\n    if (!isIE && !isEdge && !isIE11) {//兼容chrome和firefox\r\n      var _beforeUnload_time = 0, _gap_time = 0\r\n      var is_fireFox = navigator.userAgent.indexOf('Firefox') > -1//是否是火狐浏览器\r\n      window.onunload = function () {\r\n        _gap_time = new Date().getTime() - _beforeUnload_time\r\n        if (_gap_time <= 5) {\r\n          localStorage.removeItem('examDuration' + this.examInfo.examId)\r\n        } else {//谷歌浏览器刷新\r\n        }\r\n      }\r\n      window.onbeforeunload = function () {\r\n        _beforeUnload_time = new Date().getTime()\r\n        if (is_fireFox) {//火狐关闭执行\r\n\r\n        } else {//火狐浏览器刷新\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //查询当前考试的信息\r\n    getExamInfo () {\r\n      exam.getExamInfoById(this.$route.params).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.examInfo = resp.data\r\n          //设置定时(秒)\r\n          if (localStorage.getItem('examDuration' + this.examInfo.examId) === '0') localStorage.removeItem('examDuration' + this.examInfo.examId)\r\n          this.duration = localStorage.getItem('examDuration' + this.examInfo.examId) || resp.data.examDuration * 60\r\n          //考试剩余时间定时器\r\n          this.timer = window.setInterval(() => {\r\n            if (this.duration > 0) this.duration--\r\n          }, 1000)\r\n          this.getQuestionInfo(resp.data.questionIds.split(','))\r\n        }\r\n      })\r\n    },\r\n    //查询考试的题目信息\r\n    async getQuestionInfo (ids) {\r\n      await question.getQuestionByIds({ 'ids': ids.join(',') }).then(resp => {\r\n        if (resp.code === 200) {\r\n          this.questionInfo = resp?.data?.data || []\r\n          //重置问题的顺序 单选 多选 判断 简答\r\n          this.questionInfo = this.questionInfo.sort(function (a, b) {\r\n            return a.questionType - b.questionType\r\n          })\r\n        }\r\n      })\r\n      this.loading.close()\r\n      this.show = true\r\n    },\r\n    //点击展示高清大图\r\n    showBigImg (url) {\r\n      this.bigImgUrl = url\r\n      this.bigImgDialog = true\r\n    },\r\n    //检验单选题的用户选择的答案\r\n    checkSingleAnswer (index) {\r\n      this.$set(this.userAnswer, this.curIndex, index)\r\n    },\r\n    //多选题用户的答案选中\r\n    selectedMultipleAnswer (index) {\r\n      if (this.userAnswer[this.curIndex] === undefined) {//当前是多选的第一个答案\r\n        this.$set(this.userAnswer, this.curIndex, index)\r\n      } else if (String(this.userAnswer[this.curIndex]).split(',').includes(index + '')) {//取消选中\r\n        let newArr = []\r\n        String(this.userAnswer[this.curIndex]).split(',').forEach(item => {\r\n          if (item !== '' + index) newArr.push(item)\r\n        })\r\n        if (newArr.length === 0) {\r\n          this.$set(this.userAnswer, this.curIndex, undefined)\r\n        } else {\r\n          this.$set(this.userAnswer, this.curIndex, newArr.join(','))\r\n          //答案格式化顺序DBAC -> ABCD\r\n          this.userAnswer[this.curIndex] = String(this.userAnswer[this.curIndex]).split(',').sort(function (a, b) {\r\n            return a - b\r\n          }).join(',')\r\n        }\r\n      } else if (!((this.userAnswer[this.curIndex] + '').split(',').includes(index + ''))) {//第n个答案\r\n        this.$set(this.userAnswer, this.curIndex, this.userAnswer[this.curIndex] += ',' + index)\r\n        //答案格式化顺序DBAC -> ABCD\r\n        this.userAnswer[this.curIndex] = String(this.userAnswer[this.curIndex]).split(',').sort(function (a, b) {\r\n          return a - b\r\n        }).join(',')\r\n      }\r\n    },\r\n    \r\n    //上传用户考试信息进入后台\r\n    async uploadExamToAdmin () {\r\n      if (this.cameraOn) await this.takePhoto()//结束的时候拍照上传一张\r\n      // 正则\r\n      var reg = new RegExp('-', 'g')\r\n      // 去掉用户输入的非法分割符号(-),保证后端接受数据处理不报错\r\n      this.userAnswer.forEach((item, index) => {\r\n        if (this.questionInfo[index].questionType === 4) {//简答题答案处理\r\n          this.userAnswer[index] = item.replace(reg, ' ')\r\n        }\r\n      })\r\n\r\n      // 标记题目是否全部做完\r\n      let flag = true\r\n      for (let i = 0; i < this.userAnswer.length; i++) {// 检测用户是否题目全部做完\r\n        if (this.userAnswer[i] === undefined) {\r\n          flag = false\r\n        }\r\n      }\r\n      // 如果用户所有答案的数组长度小于题目长度,这个时候也要将标志位置为false\r\n      if (this.userAnswer.length < this.questionInfo.length) {\r\n        flag = false\r\n      }\r\n      //题目未做完\r\n      if (!flag) {\r\n        // if (this.userAnswer.some((item) => item === undefined)) {\r\n        this.$confirm('some questions are still not answered, still submit? o(╥﹏╥)o ?', 'Tips', {\r\n          confirmButtonText: 'confirm',\r\n          cancelButtonText: 'cancel',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          let data = {}\r\n          data.questionIds = []\r\n          data.userAnswers = this.userAnswer.join('-')\r\n          this.questionInfo.forEach((item, index) => {\r\n            data.questionIds.push(item.questionId)\r\n            //当前数据不完整,用户回答不完整(我们自动补充空答案,防止业务出错)\r\n            if (index > (this.userAnswer.length - 1)) {\r\n              data.userAnswers += '- '\r\n            }\r\n          })\r\n          //如果所有题目全部未答\r\n          if (this.userAnswer.length === 0) {\r\n            this.questionInfo.forEach(item => {\r\n              data.userAnswers += ' -'\r\n            })\r\n            data.userAnswers.split(0, data.userAnswers.length - 1)\r\n          }\r\n          data.examId = parseInt(this.$route.params.examId)\r\n          data.questionIds = data.questionIds.join(',')\r\n          data.creditImgUrl = this.takePhotoUrl.join(',')\r\n          exam.addExamRecord(data).then((resp) => {\r\n            if (resp.code === 200) {\r\n              this.$notify({\r\n                title: 'Tips',\r\n                message: 'end of exam *^▽^*',\r\n                type: 'success',\r\n                duration: 2000\r\n              })\r\n              this.$router.push('/examResult/' + resp.data)\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          this.$notify({\r\n            title: 'Tips',\r\n            message: 'keep trying! *^▽^*',\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n        })\r\n      } else {//当前题目做完了\r\n        \r\n        let data = {}\r\n        data.questionIds = []\r\n        data.userAnswers = this.userAnswer.join('-')\r\n        data.examId = parseInt(this.$route.params.examId)\r\n        data.creditImgUrl = this.takePhotoUrl.join(',')\r\n        this.questionInfo.forEach((item, index) => {\r\n          data.questionIds.push(item.questionId)\r\n        })\r\n        data.questionIds = data.questionIds.join(',')\r\n        exam.addExamRecord(data).then((resp) => {\r\n          if (resp.code === 200) {\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: 'end of exam *^▽^*',\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n            this.$router.push('/examResult/' + resp.data)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    //监控考试的剩余时间\r\n    async duration (newVal) {\r\n      localStorage.setItem('examDuration' + this.examInfo.examId, newVal)\r\n      //摄像头数据\r\n      let constraints = {\r\n        video: {\r\n          width: 200,\r\n          height: 200\r\n        },\r\n        audio: false\r\n      }\r\n      //通过调用摄像头判断用户是否中途关闭摄像头\r\n      let promise = navigator.mediaDevices.getUserMedia(constraints)\r\n      promise.catch((back) => {\r\n        this.cameraOn = false\r\n      })\r\n      if (!this.cameraOn) {//如果摄像头未开启,就再次调用开启\r\n        this.getCamera()\r\n      }\r\n      //考试时间结束了提交试卷\r\n      if (newVal < 1) {\r\n        \r\n        let data = {}\r\n        data.questionIds = []\r\n        data.userAnswers = this.userAnswer.join('-')\r\n        this.questionInfo.forEach((item, index) => {\r\n          data.questionIds.push(item.questionId)\r\n          //当前数据不完整,用户回答不完整(我们自动补充空答案,防止业务出错)\r\n          if (index > this.userAnswer.length) {\r\n            data.userAnswers += ' -'\r\n          }\r\n        })\r\n        //如果所有题目全部未答\r\n        if (data.userAnswers === '') {\r\n          this.questionInfo.forEach(item => {\r\n            data.userAnswers += ' -'\r\n          })\r\n          data.userAnswers.split(0, data.userAnswers.length - 1)\r\n        }\r\n        data.examId = parseInt(this.$route.params.examId)\r\n\r\n        data.questionIds = data.questionIds.join(',')\r\n        data.creditImgUrl = this.takePhotoUrl.join(',')\r\n        exam.addExamRecord(data).then((resp) => {\r\n          if (resp.code === 200) {\r\n            this.$notify({\r\n              title: 'Tips',\r\n              message: 'remaining time is zero, exam submitted automatically *^▽^*',\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n            this.$router.push('/examResult/' + resp.data)\r\n          }\r\n        })\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/css/student/examPage\";\r\n</style>\r\n"]}]}