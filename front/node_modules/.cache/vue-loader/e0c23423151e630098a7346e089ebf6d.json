{"remainingRequest":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\termination project\\front\\src\\views\\student\\MyGrade.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\termination project\\front\\src\\views\\student\\MyGrade.vue","mtime":1683943167560},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\termination project\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\termination project\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgZ3JhZGUgZnJvbSAnQC9hcGkvZ3JhZGUnDQppbXBvcnQgZXhhbSBmcm9tICdAL2FwaS9leGFtJw0KaW1wb3J0IHF1ZXN0aW9uIGZyb20gJ0AvYXBpL3F1ZXN0aW9uJw0KaW1wb3J0IGNvbnN0YW50cyBmcm9tICdAL3V0aWxzL2NvbnN0YW50cycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnTXlHcmFkZScsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHF1ZXJ5SW5mbzogew0KICAgICAgICBwYWdlTm86IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgdXNlcm5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpDQogICAgICB9LA0KICAgICAgLy/miJHnmoTmiJDnu6kNCiAgICAgIGdyYWRlOiBbXSwNCiAgICAgIC8v5omA5pyJ55qE6ICD6K+V5L+h5oGvDQogICAgICBhbGxFeGFtSW5mbzogW10sDQogICAgICAvL+aIkOe7qeaAu+aVsA0KICAgICAgdG90YWw6IDAsDQogICAgICAvL+ihqOagvOaVsOaNruWKoOi9vQ0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgIC8v6ZSZ6aKY55qE6K+m57uG5L+h5oGvDQogICAgICBlcnJvclF1ZXN0aW9uRGlhbG9nOiBmYWxzZSwNCiAgICAgIC8v5b2T5YmN6ICD6K+V55qE6aKY55uuDQogICAgICBxdWVzdGlvbkluZm86IFtdLA0KICAgICAgLy/lvZPliY3nlKjmiLfnmoTnrZTmoYgNCiAgICAgIHVzZXJBbnN3ZXI6IFtdLA0KICAgICAgLy/nrZTmoYjnmoTpgInpobnlkI1hYmNk5pWw5o2uDQogICAgICBvcHRpb25OYW1lOiBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddLA0KICAgICAgLy/lpKflm77nmoTlr7nor53lm77niYflnLDlnYANCiAgICAgIGJpZ0ltZ1VybDogJycsDQogICAgICBiaWdJbWdEaWFsb2c6IGZhbHNlLA0KICAgICAgLy/liqDovb3or4HkuabnmoTmlbDmja7liqDovb3liqjnlLsNCiAgICAgIGxvYWRpbmdDZXJ0aWZpY2F0ZTogZmFsc2UNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRNeUdyYWRlKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldE15R3JhZGUoKSB7DQogICAgICBncmFkZS5nZXRNeUdyYWRlKHRoaXMucXVlcnlJbmZvKS50aGVuKChyZXNwKSA9PiB7DQogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMuZ3JhZGUgPSByZXNwLmRhdGEuZGF0YQ0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwLmRhdGEudG90YWwNCiAgICAgICAgICB0aGlzLmdldEFsbEV4YW1JbmZvKCkNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgc2V0RXhhbU5hbWUoKSB7DQogICAgICB0aGlzLmdyYWRlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIHRoaXMuYWxsRXhhbUluZm8uZm9yRWFjaChpMiA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0uZXhhbUlkID09PSBpMi5leGFtSWQpIHsNCiAgICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAnZXhhbU5hbWUnLCBpMi5leGFtTmFtZSkNCiAgICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAncGFzc1Njb3JlJywgaTIucGFzc1Njb3JlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgaWYgKCFpdGVtLmV4YW1OYW1lKSB7DQogICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICdleGFtTmFtZScsIGNvbnN0YW50cy5kZWZhdWx0RXhhbU5hbWUpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRBbGxFeGFtSW5mbygpIHsNCiAgICAgIGV4YW0uYWxsRXhhbUluZm8oKS50aGVuKChyZXNwKSA9PiB7DQogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMuYWxsRXhhbUluZm8gPSByZXNwLmRhdGENCiAgICAgICAgICB0aGlzLnNldEV4YW1OYW1lKCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG9wZXJhdGlvbih2KSB7DQogICAgICBpZiAodiA9PT0gJycpIHRoaXMucXVlcnlJbmZvLmV4YW1JZCA9IG51bGwNCiAgICAgIHRoaXMuZ2V0TXlHcmFkZSgpDQogICAgfSwNCiAgICAvL+WIhumhtemhtemdouWkp+Wwj+aUueWPmA0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IHZhbA0KICAgICAgdGhpcy5nZXRNeUdyYWRlKCkNCiAgICB9LA0KICAgIC8v5YiG6aG15o+S5Lu255qE6aG15pWwDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VObyA9IHZhbA0KICAgICAgdGhpcy5nZXRNeUdyYWRlKCkNCiAgICB9LA0KICAgIC8v5qC55o2uaWRz5p+l6K+i6aKY55uu5L+h5oGvDQogICAgYXN5bmMgZ2V0UXVlc3Rpb25JbmZvQnlJZHMocXVlc3Rpb25JZHMpIHsNCiAgICAgIGF3YWl0IHF1ZXN0aW9uLmdldFF1ZXN0aW9uQnlJZHMoe2lkczogcXVlc3Rpb25JZHN9KS50aGVuKChyZXNwKSA9PiB7DQogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvID0gcmVzcD8uZGF0YT8uZGF0YSB8fCBbXQ0KICAgICAgICAgIC8v6YeN572u6Zeu6aKY55qE6aG65bqPIOWNlemAiSDlpJrpgIkg5Yik5patIOeugOetlA0KICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvID0gdGhpcy5xdWVzdGlvbkluZm8uc29ydChmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgICAgcmV0dXJuIGEucXVlc3Rpb25UeXBlIC0gYi5xdWVzdGlvblR5cGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd0Vycm9yUXVlc3Rpb24ocm93KSB7DQogICAgICBpZiAocm93LmVycm9yUXVlc3Rpb25JZHMgPT09IG51bGwpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCflvZPliY3ogIPor5XmsqHmnInpgLvovpHplJnpophPKOKIqV/iiKkpT34nKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy51c2VyQW5zd2VyID0gcm93LnVzZXJBbnN3ZXJzLnNwbGl0KCctJykNCiAgICAgICAgdGhpcy5nZXRRdWVzdGlvbkluZm9CeUlkcyhyb3cuZXJyb3JRdWVzdGlvbklkcykNCiAgICAgICAgdGhpcy5lcnJvclF1ZXN0aW9uRGlhbG9nID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/ngrnlh7vlsZXnpLrpq5jmuIXlpKflm74NCiAgICBzaG93QmlnSW1nKHVybCkgew0KICAgICAgdGhpcy5iaWdJbWdVcmwgPSB1cmwNCiAgICAgIHRoaXMuYmlnSW1nRGlhbG9nID0gdHJ1ZQ0KICAgIH0sDQogICAgLy8g6I635Y+W5LiT5bGe6K+B5LmmDQogICAgZ2V0Q2VydGlmaWNhdGUocmVjb3JkSWQsIGV4YW1OYW1lKSB7DQogICAgICB0aGlzLmxvYWRpbmdDZXJ0aWZpY2F0ZSA9IHRydWUNCiAgICAgIGdyYWRlLmdldENlcnRpZmljYXRlKHsNCiAgICAgICAgJ2V4YW1SZWNvcmRJZCc6IHJlY29yZElkLA0KICAgICAgICAnZXhhbU5hbWUnOiBleGFtTmFtZQ0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICBjb25zdCBiaW5hcnlEYXRhID0gW10NCiAgICAgICAgYmluYXJ5RGF0YS5wdXNoKHJlcykNCiAgICAgICAgLy/ojrflj5ZibG9i6ZO+5o6lDQogICAgICAgIHRoaXMucGRmVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoYmluYXJ5RGF0YSwge3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnfSkpDQogICAgICAgIC8vIOivgeS5puWIm+W7uuWujOavlSzliqjnlLvnu5PmnZ8NCiAgICAgICAgdGhpcy5sb2FkaW5nQ2VydGlmaWNhdGUgPSBmYWxzZQ0KICAgICAgICB3aW5kb3cub3Blbih0aGlzLnBkZlVybCkNCiAgICAgIH0pLmNhdGNoKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICB0aXRsZTogJ1RpcHMnLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor4Hkuabojrflj5blpLHotKUs6K+356iN5ZCO5YaN6K+VJywNCiAgICAgICAgICB0eXBlOiAnZXJyb3InLA0KICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgIH0pDQogICAgICAgIHRoaXMubG9hZGluZ0NlcnRpZmljYXRlID0gZmFsc2UNCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8v5piv5ZCm6YCa6L+H6ICD6K+VDQogICAgaXNPck5vdFBhc3NFeGFtKHJvdykgew0KICAgICAgcmV0dXJuIChyb3cpID0+IHsNCiAgICAgICAgbGV0IGZsYWcgPSBmYWxzZQ0KICAgICAgICB0aGlzLmFsbEV4YW1JbmZvLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0uZXhhbUlkID09PSByb3cuZXhhbUlkKSB7DQogICAgICAgICAgICBmbGFnID0gcm93LnRvdGFsU2NvcmUgPj0gaXRlbS5wYXNzU2NvcmUNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHJldHVybiBmbGFnDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["MyGrade.vue"],"names":[],"mappings":";AAsIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyGrade.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\r\n  <el-container\r\n    v-loading=\"loadingCertificate\"\r\n    element-loading-text=\"拼命加载证书中\"\r\n    element-loading-spinner=\"el-icon-loading\">\r\n    <el-header height=\"210\">\r\n      <!--操作的下拉框-->\r\n      <el-select @change=\"operation\" clearable v-model=\"queryInfo.examId\"\r\n                 placeholder=\"Please select the test\" style=\"margin-bottom: 25px;\">\r\n        <el-option v-for=\"(item,index) in allExamInfo\" :key=\"index\" :label=\"item.examName\"\r\n                   :value=\"parseInt(item.examId)\">\r\n          <span style=\"float: left\">{{ item.examName }}</span>\r\n        </el-option>\r\n      </el-select>\r\n\r\n    </el-header>\r\n\r\n    <el-main>\r\n      <el-table\r\n        ref=\"questionTable\"\r\n        highlight-current-row\r\n        v-loading=\"loading\"\r\n        :border=\"true\"\r\n        :data=\"grade\"\r\n        tooltip-effect=\"dark\"\r\n        style=\"width: 100%;\">\r\n\r\n        <el-table-column align=\"center\" prop=\"examName\" label=\"Examination title\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"examTime\" label=\"Examination time\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"logicScore\" label=\"Logical score\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"passScore\" label=\"Pass line\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"Total score\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.totalScore === null ? 'Not yet reviewed' : scope.row.totalScore }}\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"Pass or not\">\r\n          <template slot-scope=\"scope\">\r\n\r\n            <div v-if=\"isOrNotPassExam(scope.row)\">\r\n              <span style=\"color: limegreen\">Pass</span>\r\n            </div>\r\n\r\n            <span v-if=\"!isOrNotPassExam(scope.row)\" style=\"color: red\">Not passed</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"Operation\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button round size=\"small\" type=\"primary\" icon=\"el-icon-info\"\r\n                       @click=\"$router.push('/examResult/'+scope.row.recordId)\">Detail\r\n            </el-button>\r\n            <el-button round size=\"small\" type=\"danger\" icon=\"el-icon-error\" @click=\"showErrorQuestion(scope.row)\">Mistakes\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-pagination style=\"margin-top: 25px\"\r\n                     @size-change=\"handleSizeChange\"\r\n                     @current-change=\"handleCurrentChange\"\r\n                     :current-page=\"queryInfo.pageNo\"\r\n                     :page-sizes=\"[10, 20, 30, 50]\"\r\n                     :page-size=\"queryInfo.pageSize\"\r\n                     layout=\"total, sizes, prev, pager, next, jumper\"\r\n                     :total=\"total\">\r\n      </el-pagination>\r\n    </el-main>\r\n\r\n    <el-dialog title=\"Detail\" center :visible.sync=\"errorQuestionDialog\">\r\n      <el-card>\r\n        <!--题目信息-->\r\n        <div v-for=\"(item,index) in questionInfo\" :key=\"index\" style=\"margin-top: 15px\">\r\n          <div>\r\n            <i class=\"num\">{{ index + 1 }}</i>\r\n            <span v-if=\"item.questionType === 1\">【Single choice】</span>\r\n            <span v-else-if=\"item.questionType === 2\">【Multiple choice】</span>\r\n            <span v-else-if=\"item.questionType === 3\">【True or false】</span>\r\n            <span>{{ item.questionContent }}</span>\r\n          </div>\r\n          <!--题目中的配图-->\r\n          <img v-for=\"url in item.images\" :src=\"url\" title=\"点击查看大图\" alt=\"目图片\"\r\n               style=\"width: 100px;height: 100px;cursor: pointer\" @click=\"showBigImg(url)\">\r\n\r\n          <!--单选 和 判断 的答案列表-->\r\n          <div style=\"margin-top: 25px\"\r\n               v-show=\"item.questionType === 1 || item.questionType === 3\">\r\n            <div class=\"el-radio-group\">\r\n              <label v-for=\"(i2,index2) in item.answer\"\r\n                     :class=\"String(index2) === userAnswer[index] && i2.isTrue === 'true' ?\r\n                      'activeAndTrue' : String(index2) === userAnswer[index] ? 'active' :\r\n                       i2.isTrue === 'true' ? 'true' : ''\">\r\n                <span>{{ optionName[index2] + '、' + i2.answer }}</span>\r\n                <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"点击查看大图\"\r\n                     v-if=\"i2.images !== null\"\r\n                     v-for=\"i3 in i2.images\" :src=\"i3\" alt=\"\" @mouseover=\"showBigImg(i3)\">\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <!--多选的答案列表-->\r\n          <div style=\"margin-top: 25px\" v-show=\"item.questionType === 2\">\r\n            <div class=\"el-radio-group\">\r\n              <label v-for=\"(i2,index2) in item.answer\"\r\n                     :class=\"(userAnswer[index]+'').indexOf(index2+'') !== -1 && i2.isTrue === 'true'\r\n                     ? 'activeAndTrue' : (userAnswer[index]+'').indexOf(index2+'') !== -1 ? 'active' :\r\n                       i2.isTrue === 'true' ? 'true' : ''\">\r\n                <span>{{ optionName[index] + '、' + i2.answer }}</span>\r\n                <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\r\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"点击查看大图\"\r\n                     v-if=\"i2.images !== null\"\r\n                     v-for=\"i3 in i2.images\" :src=\"i3\" alt=\"\" @mouseover=\"showBigImg(i3)\">\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </el-card>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"errorQuestionDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"errorQuestionDialog = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!--图片回显-->\r\n    <el-dialog :visible.sync=\"bigImgDialog\" @close=\"bigImgDialog = false\">\r\n      <img style=\"width: 100%\" :src=\"bigImgUrl\">\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport grade from '@/api/grade'\r\nimport exam from '@/api/exam'\r\nimport question from '@/api/question'\r\nimport constants from '@/utils/constants'\r\n\r\nexport default {\r\n  name: 'MyGrade',\r\n  data() {\r\n    return {\r\n      queryInfo: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        username: localStorage.getItem('username')\r\n      },\r\n      //我的成绩\r\n      grade: [],\r\n      //所有的考试信息\r\n      allExamInfo: [],\r\n      //成绩总数\r\n      total: 0,\r\n      //表格数据加载\r\n      loading: true,\r\n      //错题的详细信息\r\n      errorQuestionDialog: false,\r\n      //当前考试的题目\r\n      questionInfo: [],\r\n      //当前用户的答案\r\n      userAnswer: [],\r\n      //答案的选项名abcd数据\r\n      optionName: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\r\n      //大图的对话图片地址\r\n      bigImgUrl: '',\r\n      bigImgDialog: false,\r\n      //加载证书的数据加载动画\r\n      loadingCertificate: false\r\n    }\r\n  },\r\n  created() {\r\n    this.getMyGrade()\r\n  },\r\n  methods: {\r\n    getMyGrade() {\r\n      grade.getMyGrade(this.queryInfo).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.grade = resp.data.data\r\n          this.total = resp.data.total\r\n          this.getAllExamInfo()\r\n          this.loading = false\r\n        }\r\n      })\r\n    },\r\n    setExamName() {\r\n      this.grade.forEach(item => {\r\n        this.allExamInfo.forEach(i2 => {\r\n          if (item.examId === i2.examId) {\r\n            this.$set(item, 'examName', i2.examName)\r\n            this.$set(item, 'passScore', i2.passScore)\r\n          }\r\n        })\r\n        if (!item.examName) {\r\n          this.$set(item, 'examName', constants.defaultExamName)\r\n        }\r\n      })\r\n    },\r\n    getAllExamInfo() {\r\n      exam.allExamInfo().then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.allExamInfo = resp.data\r\n          this.setExamName()\r\n        }\r\n      })\r\n    },\r\n    operation(v) {\r\n      if (v === '') this.queryInfo.examId = null\r\n      this.getMyGrade()\r\n    },\r\n    //分页页面大小改变\r\n    handleSizeChange(val) {\r\n      this.queryInfo.pageSize = val\r\n      this.getMyGrade()\r\n    },\r\n    //分页插件的页数\r\n    handleCurrentChange(val) {\r\n      this.queryInfo.pageNo = val\r\n      this.getMyGrade()\r\n    },\r\n    //根据ids查询题目信息\r\n    async getQuestionInfoByIds(questionIds) {\r\n      await question.getQuestionByIds({ids: questionIds}).then((resp) => {\r\n        if (resp.code === 200) {\r\n          this.questionInfo = resp?.data?.data || []\r\n          //重置问题的顺序 单选 多选 判断 简答\r\n          this.questionInfo = this.questionInfo.sort(function (a, b) {\r\n            return a.questionType - b.questionType\r\n          })\r\n        }\r\n      })\r\n    },\r\n    showErrorQuestion(row) {\r\n      if (row.errorQuestionIds === null) {\r\n        this.$message.warning('当前考试没有逻辑错题O(∩_∩)O~')\r\n      } else {\r\n        this.userAnswer = row.userAnswers.split('-')\r\n        this.getQuestionInfoByIds(row.errorQuestionIds)\r\n        this.errorQuestionDialog = true\r\n      }\r\n    },\r\n    //点击展示高清大图\r\n    showBigImg(url) {\r\n      this.bigImgUrl = url\r\n      this.bigImgDialog = true\r\n    },\r\n    // 获取专属证书\r\n    getCertificate(recordId, examName) {\r\n      this.loadingCertificate = true\r\n      grade.getCertificate({\r\n        'examRecordId': recordId,\r\n        'examName': examName\r\n      }).then(res => {\r\n        const binaryData = []\r\n        binaryData.push(res)\r\n        //获取blob链接\r\n        this.pdfUrl = window.URL.createObjectURL(new Blob(binaryData, {type: 'application/pdf'}))\r\n        // 证书创建完毕,动画结束\r\n        this.loadingCertificate = false\r\n        window.open(this.pdfUrl)\r\n      }).catch((res) => {\r\n        this.$notify({\r\n          title: 'Tips',\r\n          message: '证书获取失败,请稍后再试',\r\n          type: 'error',\r\n          duration: 2000\r\n        })\r\n        this.loadingCertificate = false\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    //是否通过考试\r\n    isOrNotPassExam(row) {\r\n      return (row) => {\r\n        let flag = false\r\n        this.allExamInfo.forEach(item => {\r\n          if (item.examId === row.examId) {\r\n            flag = row.totalScore >= item.passScore\r\n          }\r\n        })\r\n        return flag\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/css/student/myGrade\";\r\n</style>\r\n"]}]}